---
title: "[è‹±è¨³]Making Wrong Code Look Wrongï¼ˆé–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’é–“é•ã£ãŸã‚ˆã†ã«è¦‹ã›ã‚‹ï¼‰- Joel Spolskyæ°"
emoji: "ğŸ£"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
<!--
![](https://storage.googleapis.com/zenn-user-upload/4bf0e30e1596-20230712.jpeg =600x)
-->
![](https://storage.googleapis.com/zenn-user-upload/f62a8fa0aa4a-20230803.jpeg)

1983å¹´9æœˆã€ç§ã¯åˆã‚ã¦æœ¬æ ¼çš„ãªä»•äº‹ã«å°±ã„ãŸã€‚ã‚ªãƒ©ãƒ‹ãƒ ã¨ã„ã†ã‚¤ã‚¹ãƒ©ã‚¨ãƒ«ã«ã‚ã‚‹å¤§ããªãƒ‘ãƒ³å·¥å ´ã§åƒãã€èˆªç©ºæ¯è‰¦ã»ã©ã‚‚ã‚ã‚‹å·¨å¤§ãª6ã¤ã®ã‚ªãƒ¼ãƒ–ãƒ³ã§æ¯æ™©10ä¸‡å€‹ã‚‚ã®ãƒ‘ãƒ³ã‚’ä½œã£ã¦ã„ãŸã€‚

åˆã‚ã¦ãƒ‘ãƒ³å·¥å ´ã«å…¥ã£ãŸã¨ãã¯ã€ãã®æƒ¨çŠ¶ãŒä¿¡ã˜ã‚‰ã‚Œãªã‹ã£ãŸã€‚ã‚ªãƒ¼ãƒ–ãƒ³ã®å´é¢ã¯é»„ã°ã¿ã€æ©Ÿæ¢°ã¯éŒ†ã³ã¤ãã€æ²¹ã ã‚‰ã‘ã ã£ãŸã€‚

ã€Œã„ã¤ã‚‚ã“ã‚“ãªã«æ•£ã‚‰ã‹ã£ã¦ã„ã‚‹ã®ã§ã™ã‹ï¼Ÿã€ã¨ç§ã¯å°‹ã­ãŸã€‚

ã€Œãˆï¼Ÿä½•ã®ã“ã¨ã ï¼Ÿã€ã€Œã¡ã‚‡ã†ã©æƒé™¤ãŒçµ‚ã‚ã£ãŸã¨ã“ã‚ã ã€‚ã“ã“æ•°é€±é–“ã§ä¸€ç•ªãã‚Œã„ã ã‚ˆã€‚ã€ã¨ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯è¨€ã£ãŸã€‚

ãªã‚“ã¦ã“ã£ãŸã€‚

ãã®æ„å‘³ãŒã‚ã‹ã‚‹ã¾ã§ã€æ¯æœãƒ‘ãƒ³å·¥å ´ã‚’æƒé™¤ã™ã‚‹ã“ã¨æ•°ãƒ¶æœˆã‹ã‹ã£ãŸã€‚ãƒ‘ãƒ³å·¥å ´ã§ã¯ã€æ¸…æ½”ã¨ã¯æ©Ÿæ¢°ã«ç”Ÿåœ°ãŒã¤ã„ã¦ã„ãªã„ã¨ã„ã†ã“ã¨ã€ã‚´ãƒŸç®±ã«ç™ºé…µä¸­ã®ç”Ÿåœ°ãŒãªã„ã“ã¨ã€åºŠã«ç”Ÿåœ°ãŒè½ã¡ã¦ã„ãªã„ã“ã¨ã‚’æ„å‘³ã—ãŸã€‚

æ¸…æ½”ã¨ã¯ã€ã‚ªãƒ¼ãƒ–ãƒ³ã®ãƒšãƒ³ã‚­ãŒç™½ããã‚Œã„ã§ã‚ã‚‹ã¨ã„ã†æ„å‘³ã§ã¯ãªã‹ã£ãŸã€‚ã‚ªãƒ¼ãƒ–ãƒ³ã«ãƒšãƒ³ã‚­ã‚’å¡—ã‚‹ã®ã¯10å¹´ã”ã¨ã«ã™ã‚‹ã“ã¨ã§ã€æ¯æ—¥ã™ã‚‹ã“ã¨ã§ã¯ãªã„ã€‚æ¸…æ½”ã ã‹ã‚‰ã¨ã„ã£ã¦æ²¹æ±šã‚ŒãŒãªã„ã‚ã‘ã§ã¯ãªã„ã€‚å®Ÿéš›ã€å®šæœŸçš„ã«æ²¹ã‚’å·®ã™å¿…è¦ã®ã‚ã‚‹æ©Ÿæ¢°ã¯ãŸãã•ã‚“ã‚ã‚Šã€è–„ã„ãã‚Œã„ãªæ²¹ã®å±¤ãŒã‚ã‚Œã°ã€ãŸã„ã¦ã„ã¯æ´—æµ„ã•ã‚ŒãŸã°ã‹ã‚Šã®æ©Ÿæ¢°ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ãŸã€‚

ãƒ‘ãƒ³å·¥å ´ã«ãŠã‘ã‚‹æ¸…æ½”ã¨ã„ã†æ¦‚å¿µã¯ã€å­¦ã°ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‚‚ã®ã ã£ãŸã€‚éƒ¨å¤–è€…ã‹ã‚‰è¦‹ã‚Œã°ã€ãã®åº—ã«å…¥ã£ã¦æ¸…æ½”ã‹ã©ã†ã‹ã‚’åˆ¤æ–­ã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ã ã£ãŸã€‚ãƒ‰ã‚¦ãƒ©ã‚¦ãƒ³ãƒ€ãƒ¼ï¼ˆå››è§’ã„ãƒ–ãƒ­ãƒƒã‚¯ã‚’ãƒœãƒ¼ãƒ«çŠ¶ã«ä¸¸ã‚ã‚‹æ©Ÿæ¢°ã€å³ã®å†™çœŸï¼‰ã®å†…é¢ãŒãã‚Œã„ã«å‰Šã‚‰ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã€éƒ¨å¤–è€…ãŒè¦‹ã‚ˆã†ã¨ã¯æ€ã‚ãªã„ã ã‚ã†ã€‚éƒ¨å¤–è€…ãªã‚‰ã€å¤ã„ã‚ªãƒ¼ãƒ–ãƒ³ã®ãƒ‘ãƒãƒ«ãŒå¤‰è‰²ã—ã¦ã„ã‚‹ã“ã¨ã«ã“ã ã‚ã‚‹ã ã‚ã†ã€‚ã—ã‹ã—ã€ãƒ‘ãƒ³è·äººã«ã¨ã£ã¦ã¯ã€ã‚ªãƒ¼ãƒ–ãƒ³ã®å¤–å´ã®å¡—è£…ãŒå°‘ã—é»„è‰²ãå¤‰è‰²ã—å§‹ã‚ã¦ã„ã‚ˆã†ãŒã€æ°—ã«ã™ã‚‹ã“ã¨ã¯ãªã„ã€‚ãƒ‘ãƒ³ã®å‘³ã¯å¤‰ã‚ã‚‰ãªã„ã®ã ã‹ã‚‰ã€‚

ãƒ‘ãƒ³å±‹ã§2ã‚«æœˆã‚‚åƒã‘ã°ã€ãã‚Œã„ã« "è¦‹ã‚‹"æ–¹æ³•ã‚’å­¦ã¶ã“ã¨ãŒã§ããŸã€‚

ã‚³ãƒ¼ãƒ‰ã‚‚åŒã˜ã ã€‚

:::details åŸæ–‡
```
Way back in September 1983, I started my first real job, working at Oranim, a big bread factory in Israel that made something like 100,000 loaves of bread every night in six giant ovens the size of aircraft carriers.

The first time I walked into the bakery I couldnâ€™t believe what a mess it was. The sides of the ovens were yellowing, machines were rusting, there was grease everywhere.

â€œIs it always this messy?â€ I asked.

â€œWhat? What are you talking about?â€ the manager said. â€œWe just finished cleaning. This is the cleanest itâ€™s been in weeks.â€

Oh boy.

It took me a couple of months of cleaning the bakery every morning before I realized what they meant. In the bakery, clean meant no dough on the machines. Clean meant no fermenting dough in the trash. Clean meant no dough on the floors.

Clean did not mean the paint on the ovens was nice and white. Painting the ovens was something you did every decade, not every day. Clean did not mean no grease. In fact there were a lot of machines that needed to be greased or oiled regularly and a thin layer of clean oil was usually a sign of a machine that had just been cleaned.

This is what a dough rounder looks like.The whole concept of clean in the bakery was something you had to learn. To an outsider, it was impossible to walk in and judge whether the place was clean or not. An outsider would never think of looking at the inside surfaces of the dough rounder (a machine that rolls square blocks of dough into balls, shown in the picture at right) to see if they had been scraped clean. An outsider would obsess over the fact that the old oven had discolored panels, because those panels were huge. But a baker couldnâ€™t care less whether the paint on the outside of their oven was starting to turn a little yellow. The bread still tasted just as good.

After two months in the bakery, you learned how to â€œseeâ€ clean.

Code is the same way.
```
:::

ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã«ãªã‚ŠãŸã¦ã®é ƒã€ã‚ã‚‹ã„ã¯æ–°ã—ã„è¨€èªã®ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚‚ã†ã¨ã—ãŸã¨ãã€ã™ã¹ã¦ãŒåŒã˜ã‚ˆã†ã«ä¸å¯è§£ã«è¦‹ãˆã‚‹ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªãã®ã‚‚ã®ã‚’ç†è§£ã™ã‚‹ã¾ã§ã¯ã€æ˜ã‚‰ã‹ãªæ§‹æ–‡ã‚¨ãƒ©ãƒ¼ã«æ°—ã¥ãã“ã¨ã•ãˆã§ããªã„ã€‚

å­¦ç¿’ã®æœ€åˆã®æ®µéšã§ã¯ã€ç§ãŸã¡ãŒé€šå¸¸ "ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¹ã‚¿ã‚¤ãƒ« "ã¨å‘¼ã¶ã‚‚ã®ã‚’èªè­˜ã—å§‹ã‚ã‚‹ã€‚ã¤ã¾ã‚Šã€ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã®æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ã‚„ã€å¤§æ–‡å­—ã§è¡¨è¨˜ã•ã‚ŒãŸå¤‰ãªå¤‰æ•°ã«æ°—ã¥ãå§‹ã‚ã‚‹ã®ã ã€‚

ã“ã®ã¨ãã‚ãªãŸã¯ã€ã€Œãƒ•ã‚¸ãƒ„ãƒœé‡éƒ[^1]ã€‚ä¸€è²«ã—ãŸã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’ä½œã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„ï¼ã€ã¨è¨€ã„ã€ç¿Œæ—¥ã¯ãƒãƒ¼ãƒ ã®ãŸã‚ã«ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’æ›¸ãä¸Šã’ã€æ¬¡ã®6æ—¥é–“ã¯ã€ŒçœŸã®ä¸­æ‹¬å¼§ã‚¹ã‚¿ã‚¤ãƒ«[^1]ã€ã«ã¤ã„ã¦è­°è«–ã—ã€æ¬¡ã®3é€±é–“ã¯å¤ã„ã‚³ãƒ¼ãƒ‰ã‚’ã€ŒçœŸã®ä¸­æ‹¬å¼§ã‚¹ã‚¿ã‚¤ãƒ«ã€ã«é©åˆã•ã›ã‚‹ãŸã‚ã«æ›¸ãç›´ã™ã€ ãã—ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ç›´ã™éš›ã«é™ã‚Šå†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯æ‚ªã„ã“ã¨ã§ã¯ãªã„ã¨åˆ¤æ–­ã—ã€ã€ŒçœŸã®ä¸­æ‹¬å¼§ã‚¹ã‚¿ã‚¤ãƒ«ã€ã‚’ç´„åŠåˆ†ã»ã©é€²ã‚€ã¨ã€ã™ãã«ãã®ã“ã¨ã¯ã™ã£ã‹ã‚Šå¿˜ã‚Œã€ã‚ã‚‹ç¨®é¡ã®æ–‡å­—åˆ—ã‚¯ãƒ©ã‚¹ã‚’åˆ¥ã®ç¨®é¡ã®æ–‡å­—åˆ—ã‚¯ãƒ©ã‚¹ã«ç½®ãæ›ãˆã‚‹ã‚ˆã†ãªã€é‡‘å„²ã‘ã¨ã¯é–¢ä¿‚ã®ãªã„ã“ã¨ã«å¤¢ä¸­ã«ãªã‚Šå§‹ã‚ã‚‹ã€‚
[^1]: åŸæ–‡ã¯`Blistering Barnacles`ã¨ã‚ã‚Šãƒ–ãƒ©ãƒƒã‚¯ã‚¸ãƒ§ãƒ¼ã‚¯ã®é¡ã ã¨æ€ã†ãŒæ„å‘³ãŒã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚[ã‚¿ãƒ³ã‚¿ãƒ³ã®å†’é™º - ã‚ã–ã™ã¯æœˆ](https://en.wikipedia.org/wiki/Destination_Moon_(comics))ãŒå…ƒãƒã‚¿ã‹ï¼Ÿ[å‚è€ƒè¨˜äº‹](https://pinomondo.com/tintin-destination-moon/)
[^2]: å­—ä¸‹ã’ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¸€ç¨®ã€‚è‹±èªã ã¨[The One True Brace Styleï¼ˆç•¥ã€1TBSï¼‰](https://ja.wikipedia.org/wiki/å­—ä¸‹ã’ã‚¹ã‚¿ã‚¤ãƒ«#1TBS(OTBS))ã€‚
â˜…ã“ã“ã‹ã‚‰ã€€

ç‰¹å®šã®ç’°å¢ƒã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ã«ç†Ÿç·´ã—ã¦ãã‚‹ã¨ã€ä»–ã®ã“ã¨ãŒè¦‹ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã§ã¯ã¾ã£ãŸãå•é¡Œãªã„ã“ã¨ã§ã‚‚ã€å¿ƒé…ã«ãªã‚‹ã‚ˆã†ãªã“ã¨ã ã€‚

ä¾‹ãˆã°ã€Cè¨€èªã§ã¯:

char* dest, src;

ã“ã‚Œã¯åˆæ³•çš„ãªã‚³ãƒ¼ãƒ‰ã§ã‚ã‚Šã€ã‚ãªãŸã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«å¾“ã£ã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã—ã€æ„å›³ã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚ã—ã‹ã—ã€Cã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ã«ååˆ†ãªçµŒé¨“ã‚’ç©ã‚ã°ã€destã‚’charãƒã‚¤ãƒ³ã‚¿ã¨ã—ã¦å®£è¨€ã—ã¦ã„ã‚‹ä¸€æ–¹ã§ã€srcã‚’å˜ãªã‚‹charã¨ã—ã¦å®£è¨€ã—ã¦ã„ã‚‹ã“ã¨ã«æ°—ã¥ãã ã‚ã†ã€‚ã“ã®ã‚³ãƒ¼ãƒ‰ã¯ã¡ã‚‡ã£ã¨æ±šã„åŒ‚ã„ãŒã™ã‚‹ã€‚

ã•ã‚‰ã«å¾®å¦™ãªã®ã¯:

if (i != 0)
    foo(i);

ã“ã®å ´åˆã€ã‚³ãƒ¼ãƒ‰ã¯100ï¼…æ­£ã—ã„ã€‚ã»ã¨ã‚“ã©ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«å¾“ã£ã¦ã„ã‚‹ã—ã€ä½•ã®å•é¡Œã‚‚ãªã„ã€‚ã—ã‹ã—ã€ifæ–‡ã®å˜ä¸€ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆæœ¬ä½“ãŒä¸­æ‹¬å¼§ã§å›²ã¾ã‚Œã¦ã„ãªã„ã¨ã„ã†äº‹å®ŸãŒã€ã‚ãªãŸã‚’æ‚©ã¾ã›ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

if (i != 0)
    bar(i);
    foo(i);

...ã¨ä¸­æ‹¬å¼§ã‚’ä»˜ã‘å¿˜ã‚Œã¦ã€èª¤ã£ã¦foo(i)ã‚’ç„¡æ¡ä»¶ã«ã—ã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œãªã„ï¼ã ã‹ã‚‰ã€ä¸­æ‹¬å¼§ã§å›²ã¾ã‚Œã¦ã„ãªã„ã‚³ãƒ¼ãƒ‰ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¦‹ã‚‹ã¨ã€ã»ã‚“ã®å°‘ã—ã€ã»ã‚“ã®å°‘ã—ã€ä¸æ½”ã•ã‚’æ„Ÿã˜ã¦ä¸å®‰ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã€‚

:::details åŸæ–‡
```
When you start out as a beginning programmer or you try to read code in a new language it all looks equally inscrutable. Until you understand the programming language itself you canâ€™t even see obvious syntactic errors.

During the first phase of learning, you start to recognize the things that we usually refer to as â€œcoding style.â€ So you start to notice code that doesnâ€™t conform to indentation standards and Oddly-Capitalized variables.

Itâ€™s at this point you typically say, â€œBlistering Barnacles, weâ€™ve got to get some consistent coding conventions around here!â€ and you spend the next day writing up coding conventions for your team and the next six days arguing about the One True Brace Style and the next three weeks rewriting old code to conform to the One True Brace Style until a manager catches you and screams at you for wasting time on something that can never make money, and you decide that itâ€™s not really a bad thing to only reformat code when you revisit it, so you have about half of a True Brace Style and pretty soon you forget all about that and then you can start obsessing about something else irrelevant to making money like replacing one kind of string class with another kind of string class.

As you get more proficient at writing code in a particular environment, you start to learn to see other things. Things that may be perfectly legal and perfectly OK according to the coding convention, but which make you worry.

For example, in C:

char* dest, src;

This is legal code; it may conform to your coding convention, and it may even be what was intended, but when youâ€™ve had enough experience writing C code, youâ€™ll notice that this declares dest as a char pointer while declaring src as merely a char, and even if this might be what you wanted, it probably isnâ€™t. That code smells a little bit dirty.

Even more subtle:

if (i != 0)
    foo(i);

In this case the code is 100% correct; it conforms to most coding conventions and thereâ€™s nothing wrong with it, but the fact that the single-statement body of the ifstatement is not enclosed in braces may be bugging you, because you might be thinking in the back of your head, gosh, somebody might insert another line of code there

if (i != 0)
    bar(i);
    foo(i);

â€¦ and forget to add the braces, and thus accidentally make foo(i)unconditional! So when you see blocks of code that arenâ€™t in braces, you might sense just a tiny, wee, soupÃ§on of uncleanliness which makes you uneasy.
```
:::

ã•ã¦ã€ã“ã“ã¾ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã¨ã—ã¦ã®é”æˆåº¦ã‚’3æ®µéšã«åˆ†ã‘ã¦è¿°ã¹ã¦ããŸï¼š

1. æ¸…æ½”ã¨ä¸æ½”ãŒã‚ã‹ã‚‰ãªã„ã€‚

2. æ¸…æ½”ã•ã«ã¤ã„ã¦è¡¨é¢çš„ãªè€ƒãˆã‚’æŒã£ã¦ãŠã‚Šã€ãã®ã»ã¨ã‚“ã©ã¯ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã¸ã®æº–æ‹ ã¨ã„ã†ãƒ¬ãƒ™ãƒ«ã§ã‚ã‚‹ã€‚

3. è¡¨é¢çš„ãªä¸æ½”ã•ã®å¾®å¦™ãªãƒ’ãƒ³ãƒˆã‚’å—…ãå–ã‚Šå§‹ã‚ã€æ‰‹ã‚’ä¼¸ã°ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã™ã‚‹ã»ã©æ‚©ã‚€ã€‚

ã—ã‹ã—ã€ã•ã‚‰ã«é«˜ã„ãƒ¬ãƒ™ãƒ«ãŒã‚ã‚Šã€ãã‚Œã“ããŒç§ãŒæœ¬å½“ã«è©±ã—ãŸã„ã“ã¨ãªã®ã ï¼š

4. æ„å›³çš„ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆã™ã‚‹ã“ã¨ã§ã€ä¸æ½”ã•ã«å¯¾ã™ã‚‹å—…è¦šã‚’åƒã‹ã›ã€ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ããªã‚‹å¯èƒ½æ€§ã‚’é«˜ã‚ã‚‹ã€‚

ã“ã‚Œã“ããŒæœ¬å½“ã®èŠ¸è¡“ãªã®ã ã€‚ã‚¨ãƒ©ãƒ¼ã‚’ç”»é¢ä¸Šã§ç›®ç«‹ãŸã›ã‚‹ã‚ˆã†ãªè¦ç´„ã‚’æ–‡å­—é€šã‚Šç™ºæ˜ã™ã‚‹ã“ã¨ã§ã€å …ç‰¢ãªã‚³ãƒ¼ãƒ‰ã‚’ä½œã‚‹ã®ã ã€‚

ãã—ã¦æœ€çµ‚çš„ã«ã¯ã€ã‚ã‚‹ç¨®ã®ãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã‚’æ“è­·ã—ã€ã‚ã‚‹ç¨®ã®ä¾‹å¤–ã‚’æ‰¹åˆ¤ã™ã‚‹ã“ã¨ã«ãªã‚‹ã€‚

ã—ã‹ã—ã€ã‚‚ã—ã‚ãªãŸãŒãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã¯æ‚ªã„ã‚‚ã®ã§ã€ä¾‹å¤–ã¯ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆãƒŸãƒ«ã‚¯ã‚»ãƒ¼ã‚­ä»¥æ¥ã®æœ€é«˜ã®ç™ºæ˜ã§ã‚ã‚Šã€ä»–ã®æ„è¦‹ãªã©èããŸãã‚‚ãªã„ã¨ç¢ºä¿¡ã—ã¦ã„ã‚‹ã®ãªã‚‰ã€ãƒ­ãƒ¼ãƒªãƒ¼ã®ã¨ã“ã‚ã«è¡Œã£ã¦ä»£ã‚ã‚Šã«ç´ æ™´ã‚‰ã—ã„ã‚³ãƒŸãƒƒã‚¯ã‚¹ã‚’èª­ã‚“ã§ãã‚Œã€‚ãã†ã ã­ã€‚ãƒãƒ³ã‚¬ãƒªãƒ¼èªï¼è‰¯ã„ã€ä¾‹å¤–ï¼æ‚ªã„ã¨ã„ã†ã®ã¯ã€ã‚ãªãŸãŒçœ ãã¦ã‚ã¾ã‚ŠæŠµæŠ—ã—ã¦ã„ãªã„ã¨ãã«ã“ã£ãã‚Šæ•™ãˆã‚‹ã¤ã‚‚ã‚Šãªã‚“ã ã€‚

:::details åŸæ–‡
```
OK, so far Iâ€™ve mentioned three levels of achievement as a programmer:

1. You donâ€™t know clean from unclean.

2. You have a superficial idea of cleanliness, mostly at the level of conformance to coding conventions.

3. You start to smell subtle hints of uncleanliness beneath the surface and they bug you enough to reach out and fix the code.

Thereâ€™s an even higher level, though, which is what I really want to talk about:

4. You deliberately architect your code in such a way that your nose for uncleanliness makes your code more likely to be correct.

This is the real art: making robust code by literally inventing conventions that make errors stand out on the screen.

So now Iâ€™ll walk you through a little example, and then Iâ€™ll show you a general rule you can use for inventing these code-robustness conventions, and in the end it will lead to a defense of a certain type of Hungarian Notation, probably not the type that makes people carsick, though, and a criticism of exceptions in certain circumstances, though probably not the kind of circumstances you find yourself in most of the time.

But if youâ€™re so convinced that Hungarian Notation is a Bad Thing and that exceptions are the best invention since the chocolate milkshake and you donâ€™t even want to hear any other opinions, well, head on over to Roryâ€™s and read the excellent comix instead; you probably wonâ€™t be missing much here anyway; in fact in a minute Iâ€™m going to have actual code samples which are likely to put you to sleep even before they get a chance to make you angry. Yep. I think the plan will be to lull you almost completely to sleep and then to sneak the Hungarian=good, Exceptions=bad thing on you when youâ€™re sleepy and not really putting up much of a fight.
```
:::

ä¸€ä¾‹

ã‚¦ãƒ³ãƒ–ãƒªã‚¢ã®ã©ã“ã‹

ãªã‚‹ã»ã©ã€‚ä¾‹é¡Œã«å…¥ã‚ã†ã€‚ã‚ãªãŸãŒã‚ã‚‹ç¨®ã®ã‚¦ã‚§ãƒ–ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹ã¨ä»®å®šã—ã¾ã—ã‚‡ã†ã€‚

ã•ã¦ã€ã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒ†ã‚£ãƒ³ã‚°è„†å¼±æ€§ã€é€šç§°XSSã¨å‘¼ã°ã‚Œã‚‹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã‚¦ã‚§ãƒ–ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹éš›ã«çŸ¥ã£ã¦ãŠã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›ã—ãŸæ–‡å­—åˆ—ã‚’æ±ºã—ã¦ç¹°ã‚Šè¿”ã•ãªã„ã‚ˆã†ã«æ³¨æ„ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã¨ã„ã†ã“ã¨ã ã€‚

ä¾‹ãˆã°ã€"What is your name? "ã¨ã„ã†ã‚¨ãƒ‡ã‚£ãƒƒãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’æŒã¤ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ãŒã‚ã‚Šã€ãã®ãƒšãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ "Hello, Elmer. "ã¨ã„ã†åˆ¥ã®ãƒšãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¨ã—ã¾ã™ï¼(ãªãœãªã‚‰ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œã‚¨ãƒ«ãƒãƒ¼ã€ã®ä»£ã‚ã‚Šã«ã‚ã‚‰ã‚†ã‚‹ç¨®é¡ã®å¥‡å¦™ãªHTMLã‚„JavaScriptã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ãŒã§ãã€ãã®å¥‡å¦™ãªJavaScriptã¯ã„ã‹ãŒã‚ã—ã„ã“ã¨ã‚’ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã€ãã—ã¦ãã®ã„ã‹ãŒã‚ã—ã„ã“ã¨ã¯ã‚ãªãŸã‹ã‚‰æ¥ãŸã‚ˆã†ã«è¦‹ãˆã‚‹ã®ã§ã€ä¾‹ãˆã°ã€ã‚ãªãŸãŒãã“ã«ç½®ã„ãŸã‚¯ãƒƒã‚­ãƒ¼ã‚’èª­ã‚“ã§ã€æ‚ªã®åšå£«ã®é‚ªæ‚ªãªã‚µã‚¤ãƒˆã«è»¢é€ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‹ã‚‰ã§ã™ã€‚

:::details åŸæ–‡
```
An Example

Somewhere in Umbria

Right. On with the example. Letâ€™s pretend that youâ€™re building some kind of a web-based application, since those seem to be all the rage with the kids these days.

Now, thereâ€™s a security vulnerability called the Cross Site Scripting Vulnerability, a.k.a. XSS. I wonâ€™t go into the details here: all you have to know is that when you build a web application you have to be careful never to repeat back any strings that the user types into forms.

So for example if you have a web page that says â€œWhat is your name?â€ with an edit box and then submitting that page takes you to another page that says, Hello, Elmer! (assuming the userâ€™s name is Elmer), well, thatâ€™s a security vulnerability, because the user could type in all kinds of weird HTML and JavaScript instead of â€œElmerâ€ and their weird JavaScript could do narsty things, and now those narsty things appear to come from you, so for example they can read cookies that you put there and forward them on to Dr. Evilâ€™s evil site.
```
:::

æ“¬ä¼¼ã‚³ãƒ¼ãƒ‰ã§èª¬æ˜ã—ã‚ˆã†ã€‚æƒ³åƒã—ã¦ã¿ã‚ˆã†ã€‚

s = Request("name")

ã¯HTMLãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰å…¥åŠ›ï¼ˆPOSTå¼•æ•°ï¼‰ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚ã‚‚ã—ã“ã‚“ãªã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸã‚‰

Write "Hello, " & Request("name")

ã‚ãªãŸã®ã‚µã‚¤ãƒˆã¯ã™ã§ã«XSSæ”»æ’ƒã«å¯¾ã—ã¦è„†å¼±ã§ã™ã€‚ã“ã‚Œã ã‘ã§ã™ã€‚

ä»£ã‚ã‚Šã«ã€HTMLã«ã‚³ãƒ”ãƒ¼ã—ç›´ã™å‰ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ã¯ã€" ã‚’ &quot; ã«ç½®ãæ›ãˆãŸã‚Šã€> ã‚’ &gt; ã«ç½®ãæ›ãˆãŸã‚Šã™ã‚‹ã“ã¨ã§ã™ã€‚ã¤ã¾ã‚Š

Write "Hello, " & Encode(Request("name"))

ã¯å®Œå…¨ã«å®‰å…¨ã§ã‚ã‚‹ã€‚

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç”±æ¥ã™ã‚‹æ–‡å­—åˆ—ã¯ã™ã¹ã¦å®‰å…¨ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚å®‰å…¨ã§ãªã„æ–‡å­—åˆ—ã¯ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã›ãšã«å‡ºåŠ›ã—ã¦ã¯ãªã‚‰ãªã„ã€‚

ä¸‡ãŒä¸€ã“ã®ã‚ˆã†ãªé–“é•ã„ã‚’çŠ¯ã—ã¦ã‚‚ã€ã‚³ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã ã‘ã§ã‚ã‚‹ã“ã¨ã‚’ä¿è¨¼ã™ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’è€ƒãˆã¦ã¿ã‚ˆã†ã€‚é–“é•ã£ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ãŒã€å°‘ãªãã¨ã‚‚é–“é•ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚Œã°ã€ãã®ã‚³ãƒ¼ãƒ‰ã«å–ã‚Šçµ„ã‚“ã§ã„ã‚‹äººã‚„ã€ãã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦ã„ã‚‹äººã«è¦‹ã¤ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

:::details åŸæ–‡
```
Letâ€™s put it in pseudocode. Imagine that

s = Request("name")

reads input (a POST argument) from the HTML form. If you ever write this code:

Write "Hello, " & Request("name")

your site is already vulnerable to XSS attacks. Thatâ€™s all it takes.

Instead you have to encode it before you copy it back into the HTML. Encoding it means replacing " with &quot;, replacing > with &gt;, and so forth. So

Write "Hello, " & Encode(Request("name"))

is perfectly safe.

All strings that originate from the user are unsafe. Any unsafe string must not be output without encoding it.

Letâ€™s try to come up with a coding convention that will ensure that if you ever make this mistake, the code will just look wrong. If wrong code, at least, looks wrong, then it has a fighting chance of getting caught by someone working on that code or reviewing that code.
```
:::

å¯èƒ½ãªè§£æ±ºç­–ãã®1

ä¸€ã¤ã®è§£æ±ºç­–ã¯ã€ã™ã¹ã¦ã®æ–‡å­—åˆ—ã‚’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰é€ã‚‰ã‚Œã¦ããŸç¬é–“ã«ã™ãã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã§ã‚ã‚‹:

s = Encode(Request("name"))

Encodeã§å›²ã¾ã‚Œã¦ã„ãªã„Requestã‚’è¦‹ã‹ã‘ãŸã‚‰ã€ãã®ã‚³ãƒ¼ãƒ‰ã¯é–“é•ã£ã¦ã„ã‚‹ã«é•ã„ãªã„ã€‚

ã‚‚ã—Encodeã§å›²ã¾ã‚Œã¦ã„ãªã„Requestã‚’è¦‹ã‹ã‘ãŸã‚‰ã€ãã®ã‚³ãƒ¼ãƒ‰ã¯é–“é•ã£ã¦ã„ã‚‹ã«é•ã„ãªã„ã€‚

ã“ã®è¦ç´„ã«å¾“ãˆã°ã€XSSãƒã‚°ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ã¯ãªã„ã¨ã„ã†æ„å‘³ã§ã¯ã†ã¾ãã„ããŒã€å¿…ãšã—ã‚‚ãƒ™ã‚¹ãƒˆãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨ã¯è¨€ãˆãªã„ã€‚ä¾‹ãˆã°ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ–‡å­—åˆ—ã‚’ã©ã“ã‹ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã—ãŸã„å ´åˆã€HTMLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã™ã‚‹ã®ã¯æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã»ã¨ã‚“ã©ã®ã‚¦ã‚§ãƒ–ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã€HTMLãƒšãƒ¼ã‚¸ã«é€ã‚‰ã‚Œã‚‹æœ€å¾Œã®ç¬é–“ã¾ã§ã€å†…éƒ¨ã§ã¯ã™ã¹ã¦ã®æ–‡å­—åˆ—ãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œãªã„ã¨ã„ã†åŸå‰‡ã®ã‚‚ã¨ã«é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã€‚

ç§ãŸã¡ã¯ã—ã°ã‚‰ãã®é–“ã€å®‰å…¨ã§ãªã„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ç‰©äº‹ã‚’ç¶­æŒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

ã‚ã‹ã£ãŸã€‚ã‚‚ã†ä¸€åº¦ã‚„ã£ã¦ã¿ã‚ˆã†ã€‚

å¯èƒ½ãªè§£æ±ºç­–ãã®2

æ–‡å­—åˆ—ã‚’æ›¸ãå‡ºã™ã¨ãã¯ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¨ã„ã†ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’ä½œã£ãŸã‚‰ã©ã†ã ã‚ã†ï¼Ÿ

s = Request("name")

// much later:
Write Encode(s)

ã“ã‚Œã§ã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã®ãªã„è£¸ã®Writeã‚’è¦‹ã‚‹ãŸã³ã«ã€ä½•ã‹ãŒé–“é•ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚

HTMLã®æ–­ç‰‡ãŒã‚³ãƒ¼ãƒ‰ã®ä¸­ã«ã‚ã£ã¦ã€ãã‚Œã‚’ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§ããªã„ã“ã¨ã‚‚ã‚ã‚‹:

If mode = "linebreak" Then prefix = "<br>"

// much later:
Write prefix

ã“ã‚Œã¯ã€æ–‡å­—åˆ—ã‚’é€”ä¸­ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„æˆ‘ã€…ã®æ…£ä¾‹ã‹ã‚‰ã™ã‚‹ã¨ã€é–“é•ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚:

Write Encode(prefix)

ã—ã‹ã—ç¾åœ¨ã€æ”¹è¡Œã‚’é–‹å§‹ã™ã‚‹ã¯ãšã®"<br>"ã¯&lt;br&gt;ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯ãƒªãƒ†ãƒ©ãƒ«< b r >ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ã“ã‚Œã‚‚æ­£ã—ããªã„ã€‚

ã¤ã¾ã‚Šã€æ–‡å­—åˆ—ã‚’èª­ã¿è¾¼ã‚€ã¨ãã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§ããªã„ã“ã¨ã‚‚ã‚ã‚‹ã—ã€æ›¸ãå‡ºã™ã¨ãã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã§ããªã„ã“ã¨ã‚‚ã‚ã‚‹ã€‚è¦ç´„ãŒãªã‘ã‚Œã°ã€ã“ã®ã‚ˆã†ãªãƒªã‚¹ã‚¯ã‚’æŠ±ãˆã‚‹ã“ã¨ã«ãªã‚‹:

s = Request("name")

...pages later...
name = s

...pages later...
recordset("name") = name // store name in db in a column "name"

...days later...
theName = recordset("name")

...pages or even months later...
Write theName

æ–‡å­—åˆ—ã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’å¿˜ã‚Œã¦ã„ãªã„ã‹ï¼Ÿãƒã‚°ã‚’ç¢ºèªã§ãã‚‹å ´æ‰€ã¯ä¸€ã¤ã‚‚ãªã„ã€‚å—…ãåˆ†ã‘ã‚‹å ´æ‰€ã‚‚ãªã„ã€‚ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒãŸãã•ã‚“ã‚ã‚‹å ´åˆã€æ›¸ãå‡ºã•ã‚ŒãŸã™ã¹ã¦ã®æ–‡å­—åˆ—ã®å‡ºæ‰€ã‚’ãŸã©ã£ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ã«ã¯ã€è†¨å¤§ãªæ¢åµä½œæ¥­ãŒå¿…è¦ã«ãªã‚‹ã€‚

:::details åŸæ–‡
```
Possible Solution #1

One solution is to encode all strings right away, the minute they come in from the user:

s = Encode(Request("name"))

So our convention says this: if you ever see Request that is not surrounded by Encode, the code must be wrong.

You start to train your eyes to look for naked Requests, because they violate the convention.

That works, in the sense that if you follow this convention youâ€™ll never have a XSS bug, but thatâ€™s not necessarily the best architecture. For example maybe you want to store these user strings in a database somewhere, and it doesnâ€™t make sense to have them stored HTML-encoded in the database, because they might have to go somewhere that is not an HTML page, like to a credit card processing application that will get confused if they are HTML-encoded. Most web applications are developed under the principle that all strings internally are not encoded until the very last moment before they are sent to an HTML page, and thatâ€™s probably the right architecture.

We really need to be able to keep things around in unsafe format for a while.

OK. Iâ€™ll try again.

Possible Solution #2

What if we made a coding convention that said that when you write out any string you have to encode it?

s = Request("name")

// much later:
Write Encode(s)

Now whenever you see a naked Write without the Encode you know something is amiss.

Well, that doesnâ€™t quite workâ€¦ sometimes you have little bits of HTML around in your code and you canâ€™t encode them:

If mode = "linebreak" Then prefix = "<br>"

// much later:
Write prefix

This looks wrong according to our convention, which requires us to encode strings on the way out:

Write Encode(prefix)

But now the "<br>", which is supposed to start a new line, gets encoded to &lt;br&gt; and appears to the user as a literal < b r >. Thatâ€™s not right either.

So, sometimes you canâ€™t encode a string when you read it in, and sometimes you canâ€™t encode it when you write it out, so neither of these proposals works. And without a convention, weâ€™re still running the risk that you do this:

s = Request("name")

...pages later...
name = s

...pages later...
recordset("name") = name // store name in db in a column "name"

...days later...
theName = recordset("name")

...pages or even months later...
Write theName

Did we remember to encode the string? Thereâ€™s no single place where you can look to see the bug. Thereâ€™s no place to sniff. If you have a lot of code like this, it takes a ton of detective work to trace the origin of every string that is ever written out to make sure it has been encoded.
```
:::

çœŸã®è§£æ±ºç­–

ãã“ã§ã€ã†ã¾ãã„ãã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’ææ¡ˆã—ã‚ˆã†ã€‚ãƒ«ãƒ¼ãƒ«ã¯ã²ã¨ã¤ã ã‘ã€‚:

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ¥ãŸæ–‡å­—åˆ—ã¯ã™ã¹ã¦ã€æ¥é ­è¾ "us"(å®‰å…¨ã§ãªã„æ–‡å­—åˆ—)ã§å§‹ã¾ã‚‹åå‰ã®å¤‰æ•°(ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚«ãƒ©ãƒ )ã«æ ¼ç´ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚HTMLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ–‡å­—åˆ—ã‚„ã€æ—¢çŸ¥ã®å®‰å…¨ãªå ´æ‰€ã‹ã‚‰æ¥ãŸæ–‡å­—åˆ—ã¯ã™ã¹ã¦ã€æ¥é ­è¾ "s"ï¼ˆå®‰å…¨ãªæ–‡å­—åˆ—ï¼‰ã§å§‹ã¾ã‚‹åå‰ã®å¤‰æ•°ã«æ ¼ç´ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

åŒã˜ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãç›´ã—ã¦ã¿ã‚ˆã†ã€‚å¤‰æ•°åä»¥å¤–ã¯ä½•ã‚‚å¤‰ãˆãšã€æ–°ã—ã„è¦ç´„ã«åˆã‚ã›ã¦ã„ã‚‹ã€‚

us = Request("name")

...pages later...
usName = us

...pages later...
recordset("usName") = usName

...days later...
sName = Encode(recordset("usName"))

...pages or even months later...
Write sName

æ–°ã—ã„è¦ç´„ã§æ³¨ç›®ã—ã¦ã»ã—ã„ã®ã¯ã€å®‰å…¨ã§ãªã„æ–‡å­—åˆ—ã§ãƒŸã‚¹ã‚’çŠ¯ã—ãŸå ´åˆã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãŒå®ˆã‚‰ã‚Œã¦ã„ã‚‹é™ã‚Šã€ã‚³ãƒ¼ãƒ‰ã®ä½•è¡Œã‹ã§ã„ã¤ã§ã‚‚ãã‚Œã‚’ç¢ºèªã§ãã‚‹ã¨ã„ã†ã“ã¨ã ã€‚:

s = Request("name")

ãªãœãªã‚‰ã€Requestã®çµæœãŒsã§å§‹ã¾ã‚‹å¤‰æ•°ã«ä»£å…¥ã•ã‚Œã¦ã„ã‚‹ã®ãŒè¦‹ãˆã‚‹ãŒã€ã“ã‚Œã¯ãƒ«ãƒ¼ãƒ«é•åã ã‹ã‚‰ã ã€‚Requestã®çµæœã¯å¸¸ã«å®‰å…¨ã§ã¯ãªã„ã®ã§ã€å¸¸ã«åå‰ãŒ "us "ã§å§‹ã¾ã‚‹å¤‰æ•°ã«ä»£å…¥ã•ã‚Œãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

us = Request("name")

ã¯OKã ã€‚

usName = us

ã¯OKã ã€‚

sName = us

ã¯ç¢ºå®Ÿã«é–“é•ã„ã€‚

sName = Encode(us)

ã¯ç¢ºå®Ÿã«æ­£ã—ã„ã€‚

Write usName

ã¯ç¢ºå®Ÿã«é–“é•ã„ã€‚

Write sName

ã‚‚OKã ã€‚

Write Encode(usName)

ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰è¡Œã‚’å˜ç‹¬ã§æ¤œæŸ»ã™ã‚‹ã“ã¨ãŒã§ãã€ã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰è¡ŒãŒæ­£ã—ã‘ã‚Œã°ã€ã‚³ãƒ¼ãƒ‰å…¨ä½“ãŒæ­£ã—ã„ã“ã¨ã«ãªã‚‹ã€‚

ã“ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’ä½¿ãˆã°ã€ã‚„ãŒã¦ã‚ãªãŸã®ç›®ã¯Write usXXXã‚’è¦‹ã¦é–“é•ã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã€ãã‚Œã‚’ä¿®æ­£ã™ã‚‹æ–¹æ³•ã‚‚å³åº§ã«ã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚æœ€åˆã¯é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã®ã¯å°‘ã—é›£ã—ã„ãŒã€ã“ã‚Œã‚’3é€±é–“ç¶šã‘ã‚Œã°ã€å·¨å¤§ãªãƒ‘ãƒ³å·¥å ´ã‚’è¦‹ã¦å³åº§ã«ã“ã†è¨€ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸãƒ‘ãƒ³å±‹ã®å¾“æ¥­å“¡ã®ã‚ˆã†ã«ã€ã‚ãªãŸã®ç›®ã¯é †å¿œã™ã‚‹ã ã‚ã†ã€ã€Œã‚¸ã‚§ã‚¤ãƒ»ã‚ºãƒ¼ã‚¹ã€èª°ã‚‚ã“ã®è¾ºã‚Šã‚’æƒé™¤ã—ã¦ã„ãªã„ï¼ãŠå‰ã‚‰ã€ã„ã£ãŸã„ä½•ã‚’ã‚„ã£ã¦ã‚‹ã‚“ã ï¼Ÿã€

è¨€ã„æ›ãˆã‚Œã°ã€å®‰å…¨ã§ãªã„æ–‡å­—åˆ—ã‚„å®‰å…¨ãªæ–‡å­—åˆ—ã‚’è¿”ã™é–¢æ•°ã¯ã€å¤‰æ•°ã¨åŒã˜ã‚ˆã†ã«Usã¨Sã§å§‹ã¾ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚

:::details åŸæ–‡
```
The Real Solution

So let me suggest a coding convention that works. Weâ€™ll have just one rule:

All strings that come from the user must be stored in variables (or database columns) with a name starting with the prefix â€œusâ€ (for Unsafe String). All strings that have been HTML encoded or which came from a known-safe location must be stored in variables with a name starting with the prefix â€œsâ€ (for Safe string).

Let me rewrite that same code, changing nothing but the variable names to match our new convention.

us = Request("name")

...pages later...
usName = us

...pages later...
recordset("usName") = usName

...days later...
sName = Encode(recordset("usName"))

...pages or even months later...
Write sName

The thing I want you to notice about the new convention is that now, if you make a mistake with an unsafe string, you can always see it on some single line of code, as long as the coding convention is adhered to:

s = Request("name")

is a priori wrong, because you see the result of Request being assigned to a variable whose name begins with s, which is against the rules. The result of Request is always unsafe so it must always be assigned to a variable whose name begins with â€œusâ€.

us = Request("name")

is always OK.

usName = us

is always OK.

sName = us

is certainly wrong.

sName = Encode(us)

is certainly correct.

Write usName

is certainly wrong.

Write sName

is OK, as is

Write Encode(usName)

Every line of code can be inspected by itself, and if every line of code is correct, the entire body of code is correct.

Eventually, with this coding convention, your eyes learn to see the Write usXXX and know that itâ€™s wrong, and you instantly know how to fix it, too. I know, itâ€™s a little bit hard to see the wrong code at first, but do this for three weeks, and your eyes will adapt, just like the bakery workers who learned to look at a giant bread factory and instantly say, â€œjay-zuss, nobody cleaned insahd rounduh fo-ah! What the hayl kine a opparashun yâ€™awls runninâ€™ heey-uh?â€

In fact we can extend the rule a bit, and rename (or wrap) the Request and Encodefunctions to be UsRequest and SEncodeâ€¦ in other words, functions that return an unsafe string or a safe string will start with Us and S, just like variables.
```
:::

ã•ã¦ã€ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚:

us = UsRequest("name")
usName = us
recordset("usName") = usName
sName = SEncode(recordset("usName"))
Write sName

ç§ãŒä½•ã‚’ã—ãŸã‹ã‚ã‹ã‚Šã¾ã™ã‹ï¼Ÿã“ã‚Œã§ã€ç­‰å·ã®ä¸¡è¾ºãŒåŒã˜ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã§å§‹ã¾ã£ã¦ã„ã‚‹ã“ã¨ã‚’è¦‹ã¦ã€é–“é•ã„ã‚’ç¢ºèªã§ãã‚‹ã ã‚ã†ã€‚

us = UsRequest("name") // OKã€ä¸¡è¾ºã¨ã‚‚ã‚¢ãƒ¡ãƒªã‚«ã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚
s = UsRequest("name") // ãƒã‚°
usName = us // OK
sName = us // ç¢ºå®Ÿã«é–“é•ã„ã€‚
sName = SEncode(us) // ç¢ºå®Ÿã«æ­£ã—ã„ã€‚

Writeã®åå‰ã‚’WriteSã«ã€SEncodeã®åå‰ã‚’SFromUsã«å¤‰æ›´ã™ã‚Œã°ã€ã•ã‚‰ã«ä¸€æ­©å‰é€²ã§ãã‚‹ã€‚:

us = UsRequest("name")
usName = us
recordset("usName") = usName
sName = SFromUs(recordset("usName"))
WriteS sName

ã“ã‚Œã¯ã€é–“é•ã„ã‚’ã‚ˆã‚Šã¿ãˆã‚„ã™ã„ã‚‚ã®ã«ã™ã‚‹ã€‚ ã—ã‹ã—ã€ä½•ã‚‚ã—ãªã„ã‚ˆã‚Šã¯ãšã£ã¨ã„ã„ã“ã¨ã¯ç¢ºã‹ã ã€‚å°‘ãªãã¨ã‚‚ã€é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ãŒé–“é•ã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãŒã‚ã‚‹æ–¹ãŒãšã£ã¨ã„ã„ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®ç›®ãŒã‚³ãƒ¼ãƒ‰è¡Œã‚’é€šéã™ã‚‹ãŸã³ã«ã€ãã®ç‰¹å®šã®ãƒã‚°ãŒãƒã‚§ãƒƒã‚¯ã•ã‚Œã€é˜²æ­¢ã•ã‚Œã‚‹ã¨ã„ã†æ®µéšçš„ãªåˆ©ç‚¹ãŒå³åº§ã«å¾—ã‚‰ã‚Œã‚‹ã®ã ã€‚

:::details åŸæ–‡
```
Now look at the code:

us = UsRequest("name")
usName = us
recordset("usName") = usName
sName = SEncode(recordset("usName"))
Write sName

See what I did? Now you can look to see that both sides of the equal sign start with the same prefix to see mistakes.

us = UsRequest("name") // ok, both sides start with US
s = UsRequest("name") // bug
usName = us // ok
sName = us // certainly wrong.
sName = SEncode(us) // certainly correct.

Heck, I can take it one step further, by naming Write to WriteS and renaming SEncode to SFromUs:

us = UsRequest("name")
usName = us
recordset("usName") = usName
sName = SFromUs(recordset("usName"))
WriteS sName

This makes mistakes even more visible. Your eyes will learn to â€œseeâ€ smelly code, and this will help you find obscure security bugs just through the normal process of writing code and reading code.

Making wrong code look wrong is nice, but itâ€™s not necessarily the best possible solution to every security problem. It doesnâ€™t catch every possible bug or mistake, because you might not look at every line of code. But itâ€™s sure a heck of a lot better than nothing, and Iâ€™d much rather have a coding convention where wrong code, at least, looked wrong. You instantly gain the incremental benefit that every time a programmerâ€™s eyes pass over a line of code, that particular bug is checked for and prevented.
```
:::

ä¸€èˆ¬çš„ãªãƒ«ãƒ¼ãƒ«

é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’é–“é•ã£ã¦è¦‹ã›ã‚‹ã¨ã„ã†ã“ã®ãƒ“ã‚¸ãƒã‚¹ã¯ã€æ­£ã—ã„ã‚‚ã®ã‚’ç”»é¢ä¸Šã®ä¸€ã‚«æ‰€ã«é›†ã‚ã‚‹ã“ã¨ã«ã‹ã‹ã£ã¦ã„ã‚‹ã€‚ç§ãŒæ–‡å­—åˆ—ã‚’è¦‹ã¦ã„ã‚‹ã¨ãã€ã‚³ãƒ¼ãƒ‰ã‚’æ­£ã—ãã™ã‚‹ãŸã‚ã«ã¯ã€ãã®æ–‡å­—åˆ—ãŒå®‰å…¨ã‹å®‰å…¨ã§ãªã„ã‹ã‚’ã€ãã®æ–‡å­—åˆ—ã‚’è¦‹ã‚‹ã‚ã‚‰ã‚†ã‚‹å ´æ‰€ã§çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãã®æƒ…å ±ã‚’åˆ¥ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„åˆ¥ã®ãƒšãƒ¼ã‚¸ã«ã¯ç½®ããŸããªã„ã€‚ã¤ã¾ã‚Šã€å¤‰æ•°ã®å‘½åè¦å‰‡ãŒå¿…è¦ãªã®ã ã€‚

ä»–ã«ã‚‚ã€ç‰©äº‹ã‚’éš£åŒå£«ã«ç§»å‹•ã•ã›ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‰ã‚’æ”¹å–„ã§ãã‚‹ä¾‹ã¯ãŸãã•ã‚“ã‚ã‚‹ã€‚ã»ã¨ã‚“ã©ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã«ã¯ã€æ¬¡ã®ã‚ˆã†ãªãƒ«ãƒ¼ãƒ«ãŒã‚ã‚‹ï¼š

é–¢æ•°ã¯çŸ­ãã€‚
å¤‰æ•°ã‚’ä½¿ã†å ´æ‰€ã®ã§ãã‚‹ã ã‘è¿‘ãã§å®£è¨€ã™ã‚‹ã€‚
ãƒã‚¯ãƒ­ã‚’ä½¿ã£ã¦è‡ªåˆ†ã ã‘ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚’ä½œã‚‰ãªã„ã€‚
gotoã‚’ä½¿ã‚ãªã„ã€‚
é–‰ã˜ä¸­æ‹¬å¼§ã¯ã€å¯¾å¿œã™ã‚‹é–‹ãä¸­æ‹¬å¼§ã‹ã‚‰1ç”»é¢ä»¥ä¸Šé›¢ã•ãªã„ã€‚
ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒ«ã«å…±é€šã—ã¦ã„ã‚‹ã®ã¯ã€ã‚³ãƒ¼ãƒ‰è¡ŒãŒå®Ÿéš›ã«ä½•ã‚’ã™ã‚‹ã®ã‹ã«é–¢ã™ã‚‹é–¢é€£æƒ…å ±ã‚’ã€ç‰©ç†çš„ã«ã§ãã‚‹ã ã‘è¿‘ãã«é›†ã‚ã‚ˆã†ã¨ã—ã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ã“ã†ã™ã‚‹ã“ã¨ã§ã€ã‚ãªãŸã®çœ¼çƒãŒèµ·ã“ã£ã¦ã„ã‚‹ã“ã¨ã‚’ã™ã¹ã¦æŠŠæ¡ã§ãã‚‹å¯èƒ½æ€§ãŒé«˜ã¾ã‚‹ã€‚

ä¸€èˆ¬çš„ã«ã€ç§ã¯ç‰©äº‹ã‚’éš ã™è¨€èªæ©Ÿèƒ½ã«ã¯å°‘ã—ææ€–ã‚’æ„Ÿã˜ã‚‹ã€‚ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã¨

i = j * 5;

...Cã§ã¯ã€å°‘ãªãã¨ã‚‚jãŒ5å€ã•ã‚Œã€ãã®çµæœãŒiã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ã‚ã‹ã‚‹ã€‚

ã—ã‹ã—ã€åŒã˜ã‚³ãƒ¼ãƒ‰ã®æ–­ç‰‡ã‚’C++ã§è¦‹ãŸå ´åˆã€ä½•ã‚‚ã‚ã‹ã‚‰ãªã„ã€‚ä½•ã‚‚ã€‚C++ã§å®Ÿéš›ã«ä½•ãŒèµ·ã“ã£ã¦ã„ã‚‹ã®ã‹ã‚’çŸ¥ã‚‹å”¯ä¸€ã®æ–¹æ³•ã¯ã€iã¨jãŒã©ã‚“ãªå‹ãªã®ã‹ã‚’çŸ¥ã‚‹ã“ã¨ã ã€‚ã¨ã„ã†ã®ã‚‚ã€jã¯operator*ãŒã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå‹ã‹ã‚‚ã—ã‚Œãªã„ã—ã€ä¹—ç®—ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã²ã©ãæ°—ã®åˆ©ã„ãŸã“ã¨ã‚’ã™ã‚‹ã‹ã‚‰ã ã€‚ãã—ã¦iã¯operator=ãŒã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸå‹ã‹ã‚‚ã—ã‚Œãªã„ã—ã€å‹ã«äº’æ›æ€§ãŒãªã„ã®ã§è‡ªå‹•å‹å¼·åˆ¶é–¢æ•°ãŒå‘¼ã³å‡ºã•ã‚Œã¦ã—ã¾ã†ã‹ã‚‚ã—ã‚Œãªã„ã€‚ãã‚Œã‚’è¦‹ã¤ã‘ã‚‹å”¯ä¸€ã®æ–¹æ³•ã¯ã€å¤‰æ•°ã®å‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã ã‘ã§ãªãã€ãã®å‹ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã‚‹ã“ã¨ã ã€‚ã‚‚ã—ã©ã“ã‹ã«ç¶™æ‰¿ãŒã‚ã‚Œã°ã€ç¥ãŒã‚ãªãŸã‚’åŠ©ã‘ã¦ãã‚Œã‚‹ã ã‚ã†ã€ ã‚‚ã—ã©ã“ã‹ã«ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ãŒã‚ã‚Œã°ã€æœ¬å½“ã«å›°ã£ãŸã“ã¨ã«ãªã‚‹ã€‚ãªãœãªã‚‰ã€iå‹ã¨jå‹ãŒã©ã‚“ãªå‹ã¨ã—ã¦å®£è¨€ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’çŸ¥ã‚‹ã ã‘ã§ã¯ä¸ååˆ†ã§ã€ãã‚Œã‚‰ãŒä»Šã©ã‚“ãªå‹ãªã®ã‹ã‚’çŸ¥ã‚‰ãªã‘ã‚Œã°ãªã‚‰ãªã„ã‹ã‚‰ã ï¼ ).

C++ã§i=j*5ã‚’è¦‹ãŸã¨ãã€ã‚ãªãŸã¯æœ¬å½“ã«è‡ªå·±è²¬ä»»ãªã®ã ã€ãƒãƒ“ãƒ¼ã€‚ç§ã®è€ƒãˆã§ã¯ã€ã“ã‚Œã¯ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã ã‘ã§èµ·ã“ã‚Šã†ã‚‹å•é¡Œã‚’æ¤œå‡ºã™ã‚‹èƒ½åŠ›ã‚’ä½ä¸‹ã•ã›ã‚‹ã€‚

ã‚‚ã¡ã‚ã‚“ã€ã“ã‚“ãªã“ã¨ã¯ã©ã†ã§ã‚‚ã„ã„ã“ã¨ã ã€‚Operator*ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ‰ã™ã‚‹ã‚ˆã†ãªæ°—ã®åˆ©ã„ãŸã“ã¨ã‚’ã™ã‚‹å ´åˆã€ã“ã‚Œã¯é˜²æ°´æ€§ã®é«˜ã„æŠ½è±¡åŒ–ã‚’æä¾›ã™ã‚‹ãŸã‚ã®ã‚‚ã®ã ã€‚jã¯Unicode Stringå‹ã ã—ã€Unicode Stringã«æ•´æ•°ã‚’æ›ã‘ã‚‹ã“ã¨ã¯ã€ç¹ä½“å­—ä¸­å›½èªã‚’æ¨™æº–ä¸­å›½èªã«å¤‰æ›ã™ã‚‹ãŸã‚ã®è‰¯ã„æŠ½è±¡åŒ–ã§ã‚ã‚‹ã“ã¨ã¯æ˜ã‚‰ã‹ã ã€‚

å•é¡Œã¯ã€ã‚‚ã¡ã‚ã‚“ã€é˜²æ°´æŠ½è±¡ã¯ãã†ã§ã¯ãªã„ã¨ã„ã†ã“ã¨ã ã€‚ã“ã®ã“ã¨ã«ã¤ã„ã¦ã¯ã€ã€æ¼ã‚Œã‚‹æŠ½è±¡åŒ–ã®æ³•å‰‡ã€ã§ã™ã§ã«åºƒãèªã£ã¦ã„ã‚‹ã®ã§ã€ã“ã“ã§ã¯ç¹°ã‚Šè¿”ã•ãªã„ã€‚

ã‚¹ã‚³ãƒƒãƒˆãƒ»ãƒã‚¤ãƒ¤ãƒ¼ã‚ºã¯ã€å°‘ãªãã¨ã‚‚C++ã«ãŠã„ã¦ã¯ã€é˜²æ°´æŠ½è±¡åŒ–ãŒã©ã®ã‚ˆã†ã«å¤±æ•—ã—ã€ã©ã®ã‚ˆã†ã«ã‚ãªãŸã‚’è‹¦ã—ã‚ã‚‹ã‹ã‚’ç´¹ä»‹ã™ã‚‹ã“ã¨ã§ã‚­ãƒ£ãƒªã‚¢ã‚’ç©ã‚“ã§ããŸã€‚(ã¡ãªã¿ã«ã€ã‚¹ã‚³ãƒƒãƒˆã®è‘—æ›¸ã€Effective C++ã€ã®ç¬¬3ç‰ˆãŒå‡ºãŸã°ã‹ã‚Šã§ã€å®Œå…¨ã«æ›¸ãç›´ã•ã‚Œã¦ã„ã‚‹ã€‚ï¼‰

:::details åŸæ–‡
```
A General Rule

This business of making wrong code look wrong depends on getting the right things close together in one place on the screen. When Iâ€™m looking at a string, in order to get the code right, I need to know, everywhere I see that string, whether itâ€™s safe or unsafe. I donâ€™t want that information to be in another file or on another page that I would have to scroll to. I have to be able to see it right there and that means a variable naming convention.

There are a lot of other examples where you can improve code by moving things next to each other. Most coding conventions include rules like:

Keep functions short.
Declare your variables as close as possible to the place where you will use them.
Donâ€™t use macros to create your own personal programming language.
Donâ€™t use goto.
Donâ€™t put closing braces more than one screen away from the matching opening brace.
What all these rules have in common is that they are trying to get the relevant information about what a line of code really does physically as close together as possible. This improves the chances that your eyeballs will be able to figure out everything thatâ€™s going on.

In general, I have to admit that Iâ€™m a little bit scared of language features that hide things. When you see the code

i = j * 5;

â€¦ in C you know, at least, that j is being multiplied by five and the results stored in i.

But if you see that same snippet of code in C++, you donâ€™t know anything. Nothing. The only way to know whatâ€™s really happening in C++ is to find out what types i and j are, something which might be declared somewhere altogether else. Thatâ€™s because j might be of a type that has operator* overloaded and it does something terribly witty when you try to multiply it. And i might be of a type that has operator= overloaded, and the types might not be compatible so an automatic type coercion function might end up being called. And the only way to find out is not only to check the type of the variables, but to find the code that implements that type, and God help you if thereâ€™s inheritance somewhere, because now you have to traipse all the way up the class hierarchy all by yourself trying to find where that code really is, and if thereâ€™s polymorphism somewhere, youâ€™re really in trouble because itâ€™s not enough to know what type i and j are declared, you have to know what type they are right now, which might involve inspecting an arbitrary amount of code and you can never really be sure if youâ€™ve looked everywhere thanks to the halting problem (phew!).

When you see i=j*5 in C++ you are really on your own, bubby, and that, in my mind, reduces the ability to detect possible problems just by looking at code.

None of this was supposed to matter, of course. When you do clever-schoolboy things like override operator*, this is meant to be to help you provide a nice waterproof abstraction. Golly, j is a Unicode String type, and multiplying a Unicode String by an integer is obviously a good abstraction for converting Traditional Chinese to Standard Chinese, right?

The trouble is, of course, that waterproof abstractions arenâ€™t. Iâ€™ve already talked about this extensively in The Law of Leaky Abstractions so I wonâ€™t repeat myself here.

Scott Meyers has made a whole career out of showing you all the ways they fail and bite you, in C++ at least. (By the way, the third edition of Scottâ€™s book Effective C++ just came out; itâ€™s completely rewritten; get your copy today!)
```
:::

ã‚ã‹ã£ãŸã€‚

ã‚‚ã†ã‚ã‹ã‚‰ãªããªã£ã¦ããŸã€‚ä»Šã¾ã§ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’è¦ç´„ã—ã‚ˆã†ï¼š

é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’é–“é•ã£ãŸã‚ˆã†ã«è¦‹ã›ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚’æ¢ãã†ã€‚æ­£ã—ã„æƒ…å ±ã‚’ã‚³ãƒ¼ãƒ‰ã®ç”»é¢ä¸Šã®åŒã˜å ´æ‰€ã«ã¾ã¨ã‚ã¦é…ç½®ã™ã‚‹ã“ã¨ã§ã€ã‚ã‚‹ç¨®ã®å•é¡Œã‚’ç™ºè¦‹ã—ã€ã™ãã«ä¿®æ­£ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚

ç§ã¯ãƒãƒ³ã‚¬ãƒªãƒ¼

ã‚¤ã‚¿ãƒªã‚¢ã€ã‚¦ãƒ³ãƒ–ãƒªã‚¢å·ãƒ«ãƒ‹ãƒ£ãƒ¼ãƒæ‚ªåé«˜ã„ãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã«è©±ã‚’æˆ»ãã†ã€‚

ãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã¯ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã€ãƒãƒ£ãƒ¼ãƒ«ã‚ºãƒ»ã‚·ãƒ¢ãƒ‹ã‚¤ã«ã‚ˆã£ã¦è€ƒæ¡ˆã•ã‚ŒãŸã€‚å®Ÿéš›ã€å½¼ã¯ã‚¼ãƒ­ãƒƒã‚¯ã‚¹ãƒ»ãƒ‘ãƒ«ã‚¯ã§ãƒ–ãƒ©ãƒœãƒ¼ã¨å‘¼ã°ã‚Œã‚‹ä¸–ç•Œåˆã®WYSIWYGãƒ¯ãƒ¼ãƒ—ãƒ­ã‚’ä½œã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡æ®ã—ãŸã€‚

WYSIWYGãƒ¯ãƒ¼ãƒ—ãƒ­ã§ã¯ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ãªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒã‚ã‚‹ãŸã‚ã€ã™ã¹ã¦ã®åº§æ¨™ã‚’ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‹ã‚‰ã®ç›¸å¯¾åº§æ¨™ã‹ãƒšãƒ¼ã‚¸ã‹ã‚‰ã®ç›¸å¯¾åº§æ¨™ã®ã©ã¡ã‚‰ã‹ã«è§£é‡ˆã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚

ã“ã‚ŒãŒã€ã‚·ãƒ¢ãƒ‹ãƒ¼ãŒãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã¨å‘¼ã°ã‚Œã‚‹ã‚‚ã®ã‚’ä½¿ã„å§‹ã‚ãŸç†ç”±ã®ã²ã¨ã¤ã ã‚ã†ã€‚ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®ã‚ˆã†ã«è¦‹ãˆãŸã—ã€ã‚·ãƒ¢ãƒ‹ãƒ¼ã¯ãƒãƒ³ã‚¬ãƒªãƒ¼å‡ºèº«ã ã£ãŸã‹ã‚‰ã€ã“ã®åå‰ãŒã¤ã„ãŸã€‚ã‚·ãƒ¢ãƒ‹ãƒ¼ã®ãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯ã€ã™ã¹ã¦ã®å¤‰æ•°ã®å‰ã«ã€ãã®å¤‰æ•°ãŒå«ã‚€ã‚‚ã®ã®ç¨®é¡ã‚’ç¤ºã™å°æ–‡å­—ã®ã‚¿ã‚°ãŒä»˜ã‘ã‚‰ã‚Œã¦ã„ãŸã€‚

```
rwMax
prefix
```

ä¾‹ãˆã°ã€å¤‰æ•°åãŒrwColã®å ´åˆã€rwãŒæ¥é ­è¾ã§ã‚ã‚‹ã€‚

ã¨ã„ã†ã®ã‚‚ã€ã‚·ãƒ¢ãƒ‹ãƒ¼ã¯è«–æ–‡ã®ä¸­ã§ã‚¿ã‚¤ãƒ—ã¨ã„ã†è¨€è‘‰ã‚’é–“é•ãˆã¦ä½¿ã„ã€ä½•ä¸–ä»£ã‚‚ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŒãã®æ„å‘³ã‚’èª¤è§£ã—ã¦ã„ãŸã‹ã‚‰ã ã€‚

:::details åŸæ–‡
Okay.

Iâ€™m losing track. I better summarize The Story Until Now:

Look for coding conventions that make wrong code look wrong. Getting the right information collocated all together in the same place on screen in your code lets you see certain types of problems and fix them right away.

Iâ€™m Hungary

Lugnano, Umbria, ItalySo now we get back to the infamous Hungarian notation.

Hungarian notation was invented by Microsoft programmer Charles Simonyi. One of the major projects Simonyi worked on at Microsoft was Word; in fact he led the project to create the worldâ€™s first WYSIWYG word processor, something called Bravo at Xerox Parc.

In WYSIWYG word processing, you have scrollable windows, so every coordinate has to be interpreted as either relative to the window or relative to the page, and that makes a big difference, and keeping them straight is pretty important.

Which, I surmise, is one of the many good reasons Simonyi started using something that came to be called Hungarian notation. It looked like Hungarian, and Simonyi was from Hungary, thus the name. In Simonyiâ€™s version of Hungarian notation, every variable was prefixed with a lower case tag that indicated the kind of thing that the variable contained.

For example, if the variable name is rwCol, rw is the prefix.

Iâ€™m using the word kind on purpose, there, because Simonyi mistakenly used the word type in his paper, and generations of programmers misunderstood what he meant.

If you read Simonyiâ€™s paper closely, what he was getting at was the same kind of naming convention as I used in my example above where we decided that us meant â€œunsafe stringâ€ and s meant â€œsafe string.â€ Theyâ€™re both of type string. The compiler wonâ€™t help you if you assign one to the other and Intellisense wonâ€™t tell you bupkis. But they are semantically different; they need to be interpreted differently and treated differently and some kind of conversion function will need to be called if you assign one to the other or you will have a runtime bug. If youâ€™re lucky.
:::

ã‚·ãƒ¢ãƒ‹ãƒ¼ã®è«–æ–‡ã‚’ã‚ˆãèª­ã‚€ã¨ã€å½¼ãŒè¨€ã„ãŸã‹ã£ãŸã®ã¯ã€ç§ãŒä¸Šã®ä¾‹ã§ä½¿ã£ãŸã®ã¨åŒã˜ã‚ˆã†ãªå‘½åè¦å‰‡ã§ã€usã¯ "å®‰å…¨ã§ãªã„æ–‡å­—åˆ—"ã€sã¯ "å®‰å…¨ãªæ–‡å­—åˆ— "ã¨ã„ã†æ„å‘³ã ã£ãŸã€‚ã©ã¡ã‚‰ã‚‚æ–‡å­—åˆ—å‹ã ã€‚ä¸€æ–¹ã‚’ä»–æ–¹ã«ä»£å…¥ã—ã¦ã‚‚ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼ã¯åŠ©ã‘ã¦ãã‚Œãªã„ã—ã€ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã‚‚ä½•ã‚‚æ•™ãˆã¦ãã‚Œãªã„ã€‚ã—ã‹ã—ã€ä¸¡è€…ã¯æ„å‘³çš„ã«ç•°ãªã‚‹ã‚‚ã®ã§ã‚ã‚Šã€ç•°ãªã‚‹è§£é‡ˆã€ç•°ãªã‚‹æ‰±ã„ãŒå¿…è¦ã§ã‚ã‚Šã€ä¸€æ–¹ã‚’ä»–æ–¹ã«ä»£å…¥ã—ãŸå ´åˆã¯ä½•ã‚‰ã‹ã®å¤‰æ›é–¢æ•°ã‚’å‘¼ã³å‡ºã™å¿…è¦ãŒã‚ã‚‹ã€‚é‹ãŒã‚ˆã‘ã‚Œã°ã€‚

ã‚·ãƒ¢ãƒ‹ãƒ¼ã®ãƒãƒ³ã‚¬ãƒªãƒ¼èªè¡¨è¨˜ã®ã‚ªãƒªã‚¸ãƒŠãƒ«ãƒ»ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã€ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆç¤¾å†…ã§ã¯ã€ŒApps Hungarianã€ã¨å‘¼ã°ã‚Œã¦ã„ãŸã€‚ã‚¨ã‚¯ã‚»ãƒ«ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã«ã¯rwã¨colãŒãŸãã•ã‚“å‡ºã¦ãã‚‹ã€‚ãã†ã€ã©ã¡ã‚‰ã‚‚æ•´æ•°ã ãŒã€ãã®é–“ã‚’ä»£å…¥ã—ã¦ã‚‚æ„å‘³ãŒãªã„ã€‚Wordã§ã¯ã€xlã¨xwã‚’ã‚ˆãè¦‹ã‹ã‘ã‚‹ã¨æ€ã†ãŒã€xlã¯ã€Œãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«å¯¾ã™ã‚‹æ°´å¹³åº§æ¨™ã€ã‚’æ„å‘³ã—ã€xwã¯ã€Œã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«å¯¾ã™ã‚‹æ°´å¹³åº§æ¨™ã€ã‚’æ„å‘³ã™ã‚‹ã€‚ã©ã¡ã‚‰ã‚‚intå‹ã€‚äº’æ›æ€§ã¯ãªã„ã€‚ã©ã¡ã‚‰ã®ã‚¢ãƒ—ãƒªã§ã‚‚ã€"ãƒã‚¤ãƒˆæ•° "ã‚’æ„å‘³ã™ã‚‹cbãŒãŸãã•ã‚“ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚ãã†ã€ã“ã‚Œã‚‚intå‹ã ãŒã€å¤‰æ•°åã‚’è¦‹ã‚‹ã ã‘ã§ã‚ˆãã‚ã‹ã‚‹ã€‚ã“ã‚Œã¯ãƒã‚¤ãƒˆæ•°ã€ã¤ã¾ã‚Šãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºã ã€‚xl = cbã‚’è¦‹ãŸã‚‰ã€ãƒãƒƒãƒ‰ã‚³ãƒ¼ãƒ‰ã®ç¬›ã‚’å¹ã“ã†ã€‚xlã‚‚cbã‚‚æ•´æ•°ã§ã‚ã‚‹ã«ã‚‚ã‹ã‹ã‚ã‚‰ãšã€ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã®æ°´å¹³ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’ãƒã‚¤ãƒˆæ•°ã«è¨­å®šã™ã‚‹ã®ã¯å®Œå…¨ã«ã‚¯ãƒ¬ã‚¤ã‚¸ãƒ¼ã ã‹ã‚‰ã ã€‚

ã‚¢ãƒ—ãƒªã§ã¯ã€ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®æ¥é ­è¾ã¯å¤‰æ•°ã ã‘ã§ãªãé–¢æ•°ã«ã‚‚ä½¿ã‚ã‚Œã‚‹ã€‚ã ã‹ã‚‰ã€å®Ÿã‚’è¨€ã†ã¨ã€ç§ã¯Wordã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ãŸã“ã¨ãŒãªã„ã®ã ãŒã€YlFromYwã¨ã„ã†é–¢æ•°ãŒã‚ã‚Šã€ã“ã‚Œã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ç¸¦åº§æ¨™ã‹ã‚‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ç¸¦åº§æ¨™ã«å¤‰æ›ã™ã‚‹ã€‚ã‚¢ãƒ—ãƒªãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã§ã¯ã€ä¼çµ±çš„ãªTypeToTypeã®ä»£ã‚ã‚Šã«TypeFromTypeã¨ã„ã†è¡¨è¨˜ãŒå¿…è¦ã§ã€ãã†ã™ã‚‹ã“ã¨ã§ã€å…ˆã»ã©ã®ä¾‹ã§Encode SFromUsã®åå‰ã‚’å¤‰ãˆãŸã‚ˆã†ã«ã€ã™ã¹ã¦ã®é–¢æ•°åãŒè¿”ã™ã‚‚ã®ã®ã‚¿ã‚¤ãƒ—ã§å§‹ã¾ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚å®Ÿéš›ã€ã‚¢ãƒ—ãƒªãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã§ã¯Encodeé–¢æ•°ã¯SFromUsã¨ã„ã†åå‰ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚Apps Hungarianã§ã¯ã€ã“ã®é–¢æ•°ã®åå‰ã‚’ã©ã†ã™ã‚‹ã‹ã¨ã„ã†é¸æŠè‚¢ã¯ãªã„ã€‚ãã‚Œã¯ã„ã„ã“ã¨ã ã€‚è¦šãˆã‚‹ã“ã¨ãŒã²ã¨ã¤æ¸›ã‚‹ã—ã€Encodeã¨ã„ã†å˜èªãŒã©ã‚“ãªã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’æŒ‡ã—ã¦ã„ã‚‹ã®ã‹ç–‘å•ã«æ€ã†å¿…è¦ã‚‚ãªã„ã€‚

ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®ã‚¢ãƒ—ãƒªã¯ã€ç‰¹ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒã‚ã¾ã‚Šä¾¿åˆ©ãªå‹ã‚·ã‚¹ãƒ†ãƒ ã‚’æä¾›ã—ã¦ã„ãªã‹ã£ãŸCãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®æ™‚ä»£ã«ã¯ã€éå¸¸ã«è²´é‡ãªã‚‚ã®ã ã£ãŸã€‚

:::details åŸæ–‡
```
Simonyiâ€™s original concept for Hungarian notation was called, inside Microsoft, Apps Hungarian, because it was used in the Applications Division, to wit, Word and Excel. In Excelâ€™s source code you see a lot of rw and col and when you see those you know that they refer to rows and columns. Yep, theyâ€™re both integers, but it never makes sense to assign between them. In Word, Iâ€™m told, you see a lot of xl and xw, where xl means â€œhorizontal coordinates relative to the layoutâ€ and xw means â€œhorizontal coordinates relative to the window.â€ Both ints. Not interchangeable. In both apps you see a lot of cb meaning â€œcount of bytes.â€ Yep, itâ€™s an int again, but you know so much more about it just by looking at the variable name. Itâ€™s a count of bytes: a buffer size. And if you see xl = cb, well, blow the Bad Code Whistle, that is obviously wrong code, because even though xl and cb are both integers, itâ€™s completely crazy to set a horizontal offset in pixels to a count of bytes.

In Apps Hungarian prefixes are used for functions, as well as variables. So, to tell you the truth, Iâ€™ve never seen the Word source code, but Iâ€™ll bet you dollars to donuts thereâ€™s a function called YlFromYw which converts from vertical window coordinates to vertical layout coordinates. Apps Hungarian requires the notation TypeFromType instead of the more traditional TypeToType so that every function name could begin with the type of thing that it was returning, just like I did earlier in the example when I renamed Encode SFromUs. In fact in proper Apps Hungarian the Encode function would have to be named SFromUs. Apps Hungarian wouldnâ€™t really give you a choice in how to name this function. Thatâ€™s a good thing, because itâ€™s one less thing you need to remember, and you donâ€™t have to wonder what kind of encoding is being referred to by the word Encode: you have something much more precise.

Apps Hungarian was extremely valuable, especially in the days of C programming where the compiler didnâ€™t provide a very useful type system.
```
:::

ã—ã‹ã—ãã®å¾Œã€ã‚ã‚‹ç¨®ã®æ‚ªã„ã“ã¨ãŒèµ·ã“ã£ãŸã€‚

ãƒ€ãƒ¼ã‚¯ã‚µã‚¤ãƒ‰ãŒãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã‚’ä¹—ã£å–ã£ãŸã®ã ã€‚

èª°ã‚‚ãã®ç†ç”±ã‚„æ–¹æ³•ã‚’çŸ¥ã‚‰ãªã„ã‚ˆã†ã ãŒã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚ºãƒ»ãƒãƒ¼ãƒ ã®æ–‡æ›¸ä½œæˆè€…ãŒã€ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã¨ã—ã¦çŸ¥ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‚ã®ã‚’ã†ã£ã‹ã‚Šç™ºæ˜ã—ã¦ã—ã¾ã£ãŸã‚ˆã†ã ã€‚

èª°ã‹ãŒã€ã©ã“ã‹ã§ã€ã‚·ãƒ¢ãƒ‹ãƒ¼ã®è«–æ–‡ã‚’èª­ã¿ã€ãã“ã§å½¼ãŒã€Œå‹ã€ã¨ã„ã†è¨€è‘‰ã‚’ä½¿ã£ãŸã®ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãŒè¡Œã†å‹ãƒã‚§ãƒƒã‚¯ã®ã‚ˆã†ãªã€å‹ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ã‚¯ãƒ©ã‚¹ã®ã‚ˆã†ãªå‹ã‚’æ„å‘³ã™ã‚‹ã®ã ã¨æ€ã£ãŸã®ã ã€‚ãã†ã§ã¯ãªã‹ã£ãŸã€‚å½¼ã¯ã€Œã‚¿ã‚¤ãƒ—ã€ã¨ã„ã†è¨€è‘‰ãŒä½•ã‚’æ„å‘³ã™ã‚‹ã®ã‹ã€éå¸¸ã«æ³¨æ„æ·±ãæ­£ç¢ºã«èª¬æ˜ã—ãŸãŒã€ä½•ã®å½¹ã«ã‚‚ç«‹ãŸãªã‹ã£ãŸã€‚ãƒ€ãƒ¡ãƒ¼ã‚¸ã¯å¤§ãã‹ã£ãŸã€‚

ã‚¢ãƒ—ãƒªãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã«ã¯ã€é…åˆ—ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ„å‘³ã™ã‚‹ "ix"ã€ã‚«ã‚¦ãƒ³ãƒˆã‚’æ„å‘³ã™ã‚‹ "c"ã€2ã¤ã®æ•°å€¤ã®å·®ã‚’æ„å‘³ã™ã‚‹ "d"ï¼ˆãŸã¨ãˆã° "dx "ã¯ "width "ã‚’æ„å‘³ã™ã‚‹ï¼‰ãªã©ã€éå¸¸ã«ä¾¿åˆ©ã§æ„å‘³ã®ã‚ã‚‹æ¥é ­è¾ãŒã‚ã£ãŸã€‚

ã‚·ã‚¹ãƒ†ãƒ ã‚ºãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã«ã¯ã€longã‚’æ„å‘³ã™ã‚‹ "l "ã‚„ "unsigned long "ã‚’æ„å‘³ã™ã‚‹ "ul"ã€ãƒ€ãƒ–ãƒ«ãƒ¯ãƒ¼ãƒ‰ã‚’æ„å‘³ã™ã‚‹ "dw "ãªã©ã€ã‚ã¾ã‚Šå½¹ã«ç«‹ãŸãªã„æ¥é ­è¾ãŒã‚ã£ãŸã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚ºãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã§ã¯ã€æ¥é ­è¾ã§ã‚ã‹ã‚‹ã®ã¯å¤‰æ•°ã®å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿å‹ã ã‘ã ã£ãŸã€‚

ã“ã‚Œã¯ã‚·ãƒ¢ãƒ‹ãƒ¼ã®æ„å›³ã¨å®Ÿè·µã«å¯¾ã™ã‚‹å¾®å¦™ãªã€ã—ã‹ã—å®Œå…¨ãªèª¤è§£ã§ã‚ã‚Šã€è¤‡é›‘ã§æ¿ƒå¯†ãªå­¦è¡“çš„æ–‡ç« ã‚’æ›¸ã„ã¦ã‚‚èª°ã«ã‚‚ç†è§£ã•ã‚Œãšã€ã‚ãªãŸã®è€ƒãˆã¯èª¤è§£ã•ã‚Œã€èª¤è§£ã•ã‚ŒãŸè€ƒãˆã¯ã‚ãªãŸã®è€ƒãˆã§ãªã‹ã£ãŸã¨ã—ã¦ã‚‚å˜²ç¬‘ã•ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã‚’ç‰©èªã£ã¦ã„ã‚‹ã€‚ã‚·ã‚¹ãƒ†ãƒ ã‚ºãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã§ã¯ã€ã€ŒäºŒé‡å˜èªfooã€ã‚’æ„å‘³ã™ã‚‹dwFooãŒãŸãã•ã‚“å‡ºã¦ãã‚‹ã€‚ã ã‹ã‚‰ã€äººã€…ãŒã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã«åç™ºã—ãŸã®ã‚‚ç„¡ç†ã¯ãªã„ã€‚

ã‚·ã‚¹ãƒ†ãƒ ãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã¯ã€Windowsãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ¨™æº–ã¨ãªã‚Šã€Windowsãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°å­¦ç¿’ã®ãƒã‚¤ãƒ–ãƒ«ã§ã‚ã‚‹ãƒãƒ£ãƒ¼ãƒ«ã‚ºãƒ»ãƒšãƒƒãƒ„ã‚©ãƒ«ãƒ‰ã®ã€ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°Windowsã€ã®ã‚ˆã†ãªæ›¸ç±ã«ã‚ˆã£ã¦åºƒãæ™®åŠã—ã€ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆç¤¾å†…ã§ã•ãˆã‚‚ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®ä¸»æµã¨ãªã£ãŸã€‚

:::details åŸæ–‡
```
But then something kind of wrong happened.

The dark side took over Hungarian Notation.

Nobody seems to know why or how, but it appears that the documentation writers on the Windows team inadvertently invented what came to be known as Systems Hungarian.

Somebody, somewhere, read Simonyiâ€™s paper, where he used the word â€œtype,â€ and thought he meant type, like class, like in a type system, like the type checking that the compiler does. He did not. He explained very carefully exactly what he meant by the word â€œtype,â€ but it didnâ€™t help. The damage was done.

Apps Hungarian had very useful, meaningful prefixes like â€œixâ€ to mean an index into an array, â€œcâ€ to mean a count, â€œdâ€ to mean the difference between two numbers (for example â€œdxâ€ meant â€œwidthâ€), and so forth.

Systems Hungarian had far less useful prefixes like â€œlâ€ for long and â€œulâ€ for â€œunsigned longâ€ and â€œdwâ€ for double word, which is, actually, uh, an unsigned long. In Systems Hungarian, the only thing that the prefix told you was the actual data type of the variable.

This was a subtle but complete misunderstanding of Simonyiâ€™s intention and practice, and it just goes to show you that if you write convoluted, dense academic prose nobody will understand it and your ideas will be misinterpreted and then the misinterpreted ideas will be ridiculed even when they werenâ€™t your ideas. So in Systems Hungarian you got a lot of dwFoo meaning â€œdouble word foo,â€ and doggone it, the fact that a variable is a double word tells you darn near nothing useful at all. So itâ€™s no wonder people rebelled against Systems Hungarian.

Systems Hungarian was promulgated far and wide; it is the standard throughout the Windows programming documentation; it was spread extensively by books like Charles Petzoldâ€™s Programming Windows, the bible for learning Windows programming, and it rapidly became the dominant form of Hungarian, even inside Microsoft, where very few programmers outside the Word and Excel teams understood just what a mistake they had made.
```
:::

ãã—ã¦å¤§åä¹±ãŒèµ·ã“ã£ãŸã€‚çµå±€ã€ã‚‚ã¨ã‚‚ã¨ãƒãƒ³ã‚¬ãƒªãƒ¼èªã‚’ç†è§£ã—ã¦ã„ãªã‹ã£ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ãŸã¡ã¯ã€è‡ªåˆ†ãŸã¡ãŒä½¿ã£ã¦ã„ã‚‹èª¤è§£ã•ã‚ŒãŸã‚µãƒ–ã‚»ãƒƒãƒˆãŒã€ã‹ãªã‚Šã†ã£ã¨ã†ã—ãã€ã»ã¨ã‚“ã©å½¹ã«ç«‹ãŸãªã„ã“ã¨ã«æ°—ã¥ãã€ãã‚Œã«åæ——ã‚’ç¿»ã—ãŸã®ã ã€‚ã•ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã‚ºãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã«ã¯ã€ãƒã‚°ã‚’ç™ºè¦‹ã™ã‚‹ã®ã«å½¹ç«‹ã¤ã€ã„ã„ã¨ã“ã‚ã‚‚ã¾ã ã‚ã‚‹ã€‚å°‘ãªãã¨ã‚‚ã€ã‚·ã‚¹ãƒ†ãƒ ã‚ºãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã‚’ä½¿ã£ã¦ã„ã‚Œã°ã€å¤‰æ•°ã®å‹ãŒã‚ã‹ã‚‹ã€‚ã—ã‹ã—ã€ã‚¢ãƒ—ãƒªãƒ»ãƒãƒ³ã‚¬ãƒªãƒ¼èªã»ã©ã®ä¾¡å€¤ã¯ãªã„ã€‚

å¤§åä¹±ã¯.NETã®æœ€åˆã®ãƒªãƒªãƒ¼ã‚¹ã§ãƒ”ãƒ¼ã‚¯ã«é”ã—ãŸã€‚ãƒã‚¤ã‚¯ãƒ­ã‚½ãƒ•ãƒˆãŒã¤ã„ã«ã€Œãƒãƒ³ã‚¬ãƒªãƒ¼èªè¡¨è¨˜ã¯æ¨å¥¨ã•ã‚Œãªã„ã€ã¨è¨€ã„å§‹ã‚ãŸã®ã ã€‚å¤§å–œã³ã ã£ãŸã€‚ã‚ã–ã‚ã–ç†ç”±ã‚’èª¬æ˜ã—ãŸã¨ã‚‚æ€ãˆãªã„ã€‚å½¼ã‚‰ã¯ãŸã ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å‘½åã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ç›®ã‚’é€šã—ã€ã™ã¹ã¦ã®é …ç›®ã«ã€Œãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã‚’ä½¿ç”¨ã—ãªã„ã§ãã ã•ã„ã€ã¨æ›¸ã„ãŸã ã‘ã ã£ãŸã€‚ã“ã®æ™‚ç‚¹ã§ãƒãƒ³ã‚¬ãƒªãƒ¼è¨˜æ³•ã¯å¤§ä¸è©•ã§ã€èª°ã‚‚æ–‡å¥ã‚’è¨€ã‚ãªã‹ã£ãŸã—ã€ã‚¨ã‚¯ã‚»ãƒ«ã¨ãƒ¯ãƒ¼ãƒ‰ä»¥å¤–ã®ä¸–ç•Œã®èª°ã‚‚ãŒã€å¼·åŠ›ãªå‹ãƒã‚§ãƒƒã‚¯ã¨ã‚¤ãƒ³ãƒ†ãƒªã‚»ãƒ³ã‚¹ã®æ™‚ä»£ã«ã¯ä¸è¦ã ã¨è€ƒãˆã¦ã„ãŸå„ä»‹ãªå‘½åè¦å‰‡ã‚’ä½¿ã‚ãªãã¦æ¸ˆã‚€ã“ã¨ã«å®‰å µã—ãŸã€‚

ã—ã‹ã—ã€ãƒãƒ³ã‚¬ãƒªãƒ¼èªã®ã‚¢ãƒ—ãƒªã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ã—ã€ã‚³ãƒ¼ãƒ‰ã‚’èª­ã¿ã‚„ã™ãã—ã€æ›¸ãã‚„ã™ãã—ã€ãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ãã—ã€ä¿å®ˆã—ã‚„ã™ãã™ã‚‹ã¨ã„ã†ã€éå¸¸ã«å¤§ããªä¾¡å€¤ãŒã‚ã‚‹ã€‚

ãã®å‰ã«ã€ã‚‚ã†ã²ã¨ã¤ç´„æŸã—ãŸã“ã¨ãŒã‚ã‚‹ã€‚ãã‚Œã¯ã€ã‚‚ã†ä¸€å›ä¾‹å¤–ã‚’ãƒãƒƒã‚·ãƒ¥ã™ã‚‹ã“ã¨ã ã€‚å‰å›ãã‚Œã‚’ã‚„ã£ãŸã¨ãã€ç§ã¯å¤§å¤‰ãªç›®ã«é­ã£ãŸã€‚Joel on Softwareã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã§ã€ä¾‹å¤–ã¯äº‹å®Ÿä¸Šã€ç›®ã«è¦‹ãˆãªã„gotoã ã‹ã‚‰å«Œã„ã ã€ã¨æ›¸ã„ãŸã€‚ã‚‚ã¡ã‚ã‚“ã€ä½•ç™¾ä¸‡äººã‚‚ã®äººã€…ãŒç§ã®å–‰å…ƒã«é£›ã³è¾¼ã‚“ã§ããŸã€‚ç§ã®æ“è­·ã«å›ã£ãŸã®ã¯ã‚‚ã¡ã‚ã‚“ãƒ¬ã‚¤ãƒ¢ãƒ³ãƒ‰ãƒ»ãƒã‚§ãƒ³ã ã‘ã ãŒã€å½¼ã¯ä¸–ç•Œæœ€é«˜ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã§ã‚ã‚‹ã€‚

:::details åŸæ–‡
```
And then came The Great Rebellion. Eventually, programmers who never understood Hungarian in the first place noticed that the misunderstood subset they were using was Pretty Dang Annoying and Well-Nigh Useless, and they revolted against it. Now, there are still some nice qualities in Systems Hungarian, which help you see bugs. At the very least, if you use Systems Hungarian, youâ€™ll know the type of a variable at the spot where youâ€™re using it. But itâ€™s not nearly as valuable as Apps Hungarian.

The Great Rebellion hit its peak with the first release of .NET. Microsoft finally started telling people, â€œHungarian Notation Is Not Recommended.â€ There was much rejoicing. I donâ€™t even think they bothered saying why. They just went through the naming guidelines section of the document and wrote, â€œDo Not Use Hungarian Notationâ€ in every entry. Hungarian Notation was so doggone unpopular by this point that nobody really complained, and everybody in the world outside of Excel and Word were relieved at no longer having to use an awkward naming convention that, they thought, was unnecessary in the days of strong type checking and Intellisense.

But thereâ€™s still a tremendous amount of value to Apps Hungarian, in that it increases collocation in code, which makes the code easier to read, write, debug, and maintain, and, most importantly, it makes wrong code look wrong.

Before we go, thereâ€™s one more thing I promised to do, which is to bash exceptions one more time. The last time I did that I got in a lot of trouble. In an off-the-cuff remark on the Joel on Software homepage, I wrote that I donâ€™t like exceptions because they are, effectively, an invisible goto, which, I reasoned, is even worse than a goto you can see. Of course millions of people jumped down my throat. The only person in the world who leapt to my defense was, of course, Raymond Chen, who is, by the way, the best programmer in the world, so that has to say something, right?
```
:::

ã“ã®è¨˜äº‹ã®æ–‡è„ˆã§è¨€ãˆã°ã€ä¾‹å¤–ã¨ã¯ã“ã†ã„ã†ã“ã¨ã ã€‚ã‚ãªãŸã®ç›®ã¯ã€è¦‹ã‚‹ã¹ãã‚‚ã®ãŒã‚ã‚‹é™ã‚Šã€é–“é•ã£ãŸã‚‚ã®ã‚’è¦‹ã‚‹ã“ã¨ã‚’å­¦ã¶ã€‚ã‚³ãƒ¼ãƒ‰ã‚’æœ¬å½“ã«ã€æœ¬å½“ã«å …ç‰¢ãªã‚‚ã®ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã¨ãã«ã€ã‚³ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¯èƒ½ã«ã™ã‚‹ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ãŒå¿…è¦ã ã€‚è¨€ã„æ›ãˆã‚Œã°ã€ã‚³ãƒ¼ãƒ‰ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã¨ã„ã†æƒ…å ±ãŒç›®ã®å‰ã«ã‚ã‚Œã°ã‚ã‚‹ã»ã©ã€é–“é•ã„ã‚’è¦‹ã¤ã‘ã‚‹ã®ãŒã†ã¾ããªã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ã‚³ãƒ¼ãƒ‰ã«

dosomething();
cleanup();

...ã‚ãªãŸã®ç›®ãŒæ•™ãˆã¦ãã‚Œã‚‹ã€‚æˆ‘ã€…ã¯å¸¸ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã™ã‚‹ï¼ã—ã‹ã—ã€dosomethingãŒä¾‹å¤–ã‚’æŠ•ã’ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã¯ã€cleanupmãŒå‘¼ã°ã‚Œãªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã¨ã„ã†ã“ã¨ã ã€‚ç§ã®è¨€ã„ãŸã„ã“ã¨ã¯ã€ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒç¢ºå®Ÿã«å‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨ã‚’çŸ¥ã‚‹å”¯ä¸€ã®æ–¹æ³•ã¯ã€dosomethingã®ã‚³ãƒ¼ãƒ«ãƒ„ãƒªãƒ¼å…¨ä½“ã‚’èª¿æŸ»ã—ã¦ã€ä¾‹å¤–ã‚’æŠ•ã’ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚‚ã®ãŒã©ã“ã‹ã«ãªã„ã‹ç¢ºèªã™ã‚‹ã“ã¨ã ã€‚ã‚³ãƒ¼ãƒ‰ãŒæ­£ã—ã„ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã¨ã„ã†ç–‘å•ã«ç­”ãˆã‚‹ã«ã¯ã€ã©ã“ã‹åˆ¥ã®å ´æ‰€ã‚’è¦‹ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ã¤ã¾ã‚Šã€é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹ã“ã¨ã‚’å­¦ç¿’ã™ã‚‹ç›®ã®èƒ½åŠ›ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ãŒã§ããªã„ã®ã ã€‚


ç§ãŒã€ãŸãã•ã‚“ã®ãƒ‡ãƒ¼ã‚¿ã‚’é›†ã‚ã¦1æ—¥ã«1å›å°åˆ·ã™ã‚‹ã‚ˆã†ãªã€ã¡ã£ã½ã‘ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã„ã¦ã„ã‚‹ã¨ãã€ä¾‹å¤–ã¯ç´ æ™´ã‚‰ã—ã„ã‚‚ã®ã ã€‚èµ·ã“ã‚Šã†ã‚‹é–“é•ã£ãŸã“ã¨ã‚’ã™ã¹ã¦ç„¡è¦–ã—ã€ä½•ã‹å•é¡ŒãŒèµ·ããŸã‚‰ãƒ¡ãƒ¼ãƒ«ã§çŸ¥ã‚‰ã›ã¦ãã‚Œã‚‹ã‚ˆã†ãªã€å¤§ããªtry/catchã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ å…¨ä½“ã‚’åŒ…ã‚€ã“ã¨ã»ã©å¥½ããªã“ã¨ã¯ãªã„ã€‚ä¾‹å¤–ã¯ã€ç´ æ—©ãå®Ÿè¡Œã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã‚„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã€ãƒŸãƒƒã‚·ãƒ§ãƒ³ãƒ»ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ã§ã‚‚ç”Ÿå‘½ã‚’ç¶­æŒã™ã‚‹ã‚ã‘ã§ã‚‚ãªã„ã‚³ãƒ¼ãƒ‰ã«ã¯é©ã—ã¦ã„ã‚‹ã€‚ã—ã‹ã—ã€ã‚ªãƒšãƒ¬ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ»ã‚·ã‚¹ãƒ†ãƒ ã‚„åŸå­åŠ›ç™ºé›»æ‰€ã€ã‚ã‚‹ã„ã¯é–‹è…¹æ‰‹è¡“ã«ä½¿ã‚ã‚Œã‚‹é«˜é€Ÿä¸¸ã®ã“ã‚’åˆ¶å¾¡ã™ã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’æ›¸ãã®ã§ã‚ã‚Œã°ã€ä¾‹å¤–ã¯éå¸¸ã«å±é™ºã ã€‚


ä¾‹å¤–ã‚’æ­£ã—ãç†è§£ã›ãšã€ä¾‹å¤–ã‚’å¿ƒã®ä¸­ã«å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã•ãˆå­ã‚ãªã‘ã‚Œã°ã€ä¾‹å¤–ãŒç§ã®äººç”Ÿã‚’å‘ä¸Šã•ã›ã‚‹æ–¹æ³•ã‚’ã™ã¹ã¦ç†è§£ã§ããªã„ãªã‚“ã¦ã€ç§ãŒã„ã„åŠ æ¸›ãªãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œãªã„ãŒã€æ®‹å¿µãªã“ã¨ã ã€‚æœ¬å½“ã«ä¿¡é ¼ã§ãã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãæ–¹æ³•ã¯ã€äººé–“ã®å…¸å‹çš„ãªå¼±ã•ã‚’è€ƒæ…®ã—ãŸã‚·ãƒ³ãƒ—ãƒ«ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã“ã¨ã§ã‚ã‚Šã€ç„¡è¬¬ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã‚’æƒ³å®šã—ãŸã€éš ã‚ŒãŸå‰¯ä½œç”¨ã‚„æ¼ã‚Œã®ã‚ã‚‹æŠ½è±¡åŒ–ã‚’æŒã¤è¤‡é›‘ãªãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã†ã“ã¨ã§ã¯ãªã„ã€‚

:::details åŸæ–‡
```
Hereâ€™s the thing with exceptions, in the context of this article. Your eyes learn to see wrong things, as long as there is something to see, and this prevents bugs. In order to make code really, really robust, when you code-review it, you need to have coding conventions that allow collocation. In other words, the more information about what code is doing is located right in front of your eyes, the better a job youâ€™ll do at finding the mistakes. When you have code that says

dosomething();
cleanup();

â€¦ your eyes tell you, whatâ€™s wrong with that? We always clean up! But the possibility that dosomething might throw an exception means that cleanupmight not get called. And thatâ€™s easily fixable, using finally or whatnot, but thatâ€™s not my point: my point is that the only way to know that cleanup is definitely called is to investigate the entire call tree of dosomething to see if thereâ€™s anything in there, anywhere, which can throw an exception, and thatâ€™s ok, and there are things like checked exceptions to make it less painful, but the real point is that exceptions eliminate collocation. You have to look somewhere else to answer a question of whether code is doing the right thing, so youâ€™re not able to take advantage of your eyeâ€™s built-in ability to learn to see wrong code, because thereâ€™s nothing to see.

Now, when Iâ€™m writing a dinky script to gather up a bunch of data and print it once a day, heck yeah, exceptions are great. I like nothing more than to ignore all possible wrong things that can happen and just wrap up the whole damn program in a big olâ€™ try/catch that emails me if anything ever goes wrong. Exceptions are fine for quick-and-dirty code, for scripts, and for code that is neither mission critical nor life-sustaining. But if youâ€™re writing an operating system, or a nuclear power plant, or the software to control a high speed circular saw used in open heart surgery, exceptions are extremely dangerous.

I know people will assume that Iâ€™m a lame programmer for failing to understand exceptions properly and failing to understand all the ways they can improve my life if only I was willing to let exceptions into my heart, but, too bad. The way to write really reliable code is to try to use simple tools that take into account typical human frailty, not complex tools with hidden side effects and leaky abstractions that assume an infallible programmer.
```
:::

## å‚è€ƒè¨˜äº‹
https://www.joelonsoftware.com/2005/05/11/making-wrong-code-look-wrong/
https://web.archive.org/web/20190418033007/http://local.joelonsoftware.com/mediawiki/index.php/é–“é•ã£ãŸã‚³ãƒ¼ãƒ‰ã¯é–“é•ã£ã¦è¦‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹