---
title: "[PowerShell]â€œping -tâ€ã®ã‚ˆã†ã«é€£ç¶šã—ã¦pingç–Žé€šã™ã‚‹æ–¹æ³•"
emoji: "ðŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---
## æ¦‚è¦

ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ã¯ã€ã‚³ãƒžãƒ³ãƒ‰ã€Œ`ping -t "IPã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã¾ãŸã¯ãƒ›ã‚¹ãƒˆå"`ã€ã§é€£ç¶šã—ã¦Pingç–Žé€šå¯èƒ½ã§ã™ã€‚
ã“ã®ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚³ãƒžãƒ³ãƒ‰ã¯ã€PowerShellã§ã‚‚å‘¼ã³å‡ºã›ã‚‹ãŸã‚ã€å•é¡Œã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€
ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¡¨ç¤ºãŒãƒ¬ã‚¬ã‚·ãƒ¼ã™ãŽã‚‹ã¨å€‹äººçš„ã«ã‹ã‚“ã˜ã¦ã„ã¾ã—ãŸã€‚

```cmd:ã‚³ãƒžãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§é€£ç¶špingç–Žé€šã™ã‚‹
Microsoft Windows [Version 10.0.19045.4046]
(c) Microsoft Corporation. All rights reserved.

C:\Users\"ãƒ¦ãƒ¼ã‚¶ãƒ¼å">ping -t www.bing.com

e86303.dscx.akamaiedge.net [23.52.106.66]ã« ping ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ 32 ãƒã‚¤ãƒˆã®ãƒ‡ãƒ¼ã‚¿:
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =25ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =23ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =22ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =22ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =23ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =23ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =22ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =23ms TTL=55
23.52.106.66 ã‹ã‚‰ã®å¿œç­”: ãƒã‚¤ãƒˆæ•° =32 æ™‚é–“ =28ms TTL=55

23.52.106.66 ã® ping çµ±è¨ˆ:
    ãƒ‘ã‚±ãƒƒãƒˆæ•°: é€ä¿¡ = 9ã€å—ä¿¡ = 9ã€æå¤± = 0 (0% ã®æå¤±)ã€
ãƒ©ã‚¦ãƒ³ãƒ‰ ãƒˆãƒªãƒƒãƒ—ã®æ¦‚ç®—æ™‚é–“ (ãƒŸãƒªç§’):
    æœ€å° = 22msã€æœ€å¤§ = 28msã€å¹³å‡ = 23ms
Ctrl+C
^C
C:\Users\"ãƒ¦ãƒ¼ã‚¶ãƒ¼å">

```

PS5.1ã¨7.3ä»¥é™ã®PowerShellã§ã¯ã€Test-Connectionã®ä»•æ§˜ãŒå¤‰æ›´ã€‚

7.3ä»¥é™ã§ã¯ã€Test-Connectionã«Repeatã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ãŒã€
5.1ã‚’å«ã‚€7.2ä»¥å‰ã§ã¯ã€ãã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãªã„ã€‚

```powershell:
Function 
# pingã‚’å®Ÿè¡Œã™ã‚‹å®›å…ˆã‚’æŒ‡å®šã™ã‚‹
$target = "www.bing.com"
# ãƒ–ãƒ¬ãƒ¼ã‚¯é€ä¿¡ã™ã‚‹ã¾ã§ç„¡é™ãƒ«ãƒ¼ãƒ—
while ($true) {
  # pingå®Ÿè¡Œ
  $tc = Test-Connection $target -Count 1
  # ç¾åœ¨æ™‚åˆ»
  $datetime = Get-Date -Format "yyyy/MM/dd HH:mm:ss.fff"
  # çµæžœæƒ…å ±ã‚’è¡¨ç¤º
  Write-Output "$datetime, $target, $($tc.ResponseTime) ms"
  # é–“éš”ã‚’ã‚ã‘ã‚‹ãŸã‚ã®sleep
  Start-Sleep -Milliseconds 1000
}
```

PowerShellã‚’ä½¿ã„pingã‚’é€£ç¶šã§å®Ÿè¡Œ
https://qiita.com/akira6592/items/236939ad62bd1f98371e

:::details Bing AIã«Test-Connection ã¨ Test-NetConnection ã®ç›¸é•ç‚¹ãƒ»ä½¿ã„åˆ†ã‘æ–¹ã‚’èžã 
> 
> 
> PowerShellã«ãŠã‘ã‚‹ä¸‹è¨˜ã®ã‚³ãƒžãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆ2ç‚¹ã®ç›¸é•ç‚¹ã¨ä½¿ã„åˆ†ã‘æ–¹ã‚’æ•™ãˆã¦
> ãƒ»Test-Connection
> ãƒ»Test-NetConnection
ã€€
> 
> ã€€
> ã“ã‚“ã«ã¡ã¯ã€ã“ã‚Œã¯Bingã§ã™ã€‚PowerShellã®ã‚³ãƒžãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã«ã¤ã„ã¦ã®ã”è³ªå•ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ðŸ˜Š
> 
> Test-Connectionã¨Test-NetConnectionã¯ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æŽ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã®ã‚³ãƒžãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ã™ãŒã€ã„ãã¤ã‹ã®é•ã„ãŒã‚ã‚Šã¾ã™ã€‚Â¹Â²
> 
> - Test-Connectionã¯ã€ICMPã‚¨ã‚³ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆpingï¼‰ã‚’ä½¿ç”¨ã—ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¨ã®æŽ¥ç¶šæ€§ã‚’ç¢ºèªã—ã¾ã™ã€‚â´ ã¾ãŸã€-Sourceãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã€ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰åˆ¥ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¸ã®æŽ¥ç¶šæ€§ã‚‚ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚Â¹ Test-Connectionã¯ã€TestConnectionCommand+PingStatusã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã®ã§ã€PowerShellã§è©³ç´°ã«èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚â´
> - Test-NetConnectionã¯ã€Test-Connectionã®å¾Œç¶™ã‚³ãƒžãƒ³ãƒ‰ãƒ¬ãƒƒãƒˆã§ã€ã‚ˆã‚Šå¤šãã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚Â¹ ä¾‹ãˆã°ã€-Portãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’æŒ‡å®šã™ã‚‹ã¨ã€TCPãƒãƒ¼ãƒˆã¸ã®æŽ¥ç¶šã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚Â³ ã¾ãŸã€-TraceRouteãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆã‚’å®Ÿè¡Œã§ãã¾ã™ã€‚Â¹ Test-NetConnectionã¯ã€TestConnectionResultã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã™ã®ã§ã€PowerShellã§è©³ç´°ã«èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚Â¹
> 
> Test-Connectionã¨Test-NetConnectionã®ä½¿ã„åˆ†ã‘æ–¹ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
> 
> - ICMPã‚¨ã‚³ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆpingï¼‰ã§ã®æŽ¥ç¶šæ€§ã®ã¿ã‚’ç¢ºèªã—ãŸã„å ´åˆã¯ã€Test-Connectionã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
> - TCPãƒãƒ¼ãƒˆã‚„ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ«ãƒ¼ãƒˆãªã©ã€ã‚ˆã‚Šè©³ç´°ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆã‚’è¡Œã„ãŸã„å ´åˆã¯ã€Test-NetConnectionã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
> - ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã‹ã‚‰åˆ¥ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã¸ã®æŽ¥ç¶šæ€§ã‚’ãƒ†ã‚¹ãƒˆã—ãŸã„å ´åˆã¯ã€Test-Connectionã®-Sourceãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
> 
> ä»¥ä¸ŠãŒã€PowerShellã®Test-Connectionã¨Test-NetConnectionã®ç›¸é•ç‚¹ã¨ä½¿ã„åˆ†ã‘æ–¹ã«ãªã‚Šã¾ã™ã€‚ã”å‚è€ƒã«ãªã‚Œã°å¹¸ã„ã§ã™ã€‚ðŸ˜Š
> 
> ã‚½ãƒ¼ã‚¹: Bing ã¨ã®ä¼šè©± 2023/12/20
> (1) Test-NetConnection vs. Test-Connection â€“ Testing a network .... https://4sysops.com/archives/test-netconnection-vs-test-connection-testing-a-network-connection-with-powershell/.
> (2) Windowsã‹ã‚‰ã®ãƒãƒ¼ãƒˆç–Žé€šã‚’ç¢ºèªã™ã‚‹æ–¹æ³•ã®æ¯”è¼ƒ #Windows - Qiita. https://qiita.com/NUMA09/items/a20147f79e9caedb1add.
> (3) Test-Connection (Microsoft.PowerShell.Management .... https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.management/test-connection?view=powershell-7.4.
> (4) Test for connection to the internet in a powershell script?. https://stackoverflow.com/questions/76716193/test-for-connection-to-the-internet-in-a-powershell-script.
> (5) Come testare la connessione di rete da PowerShell [TurboLab.it]. https://turbolab.it/windows-10/come-testare-connessione-rete-powershell-3877.
:::
