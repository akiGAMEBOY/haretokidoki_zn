---
title: "PowerShellを使いWSL2に接続する方法"
emoji: "😸"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---
## 概要

WSL2（Windows Subsystem for Linux Version 2）を使用することにより、低コストでLinux環境を構築・運用できます。
通常はWindowsシステムでファイルシステムを参照しますが、高速で拡張性もあるLinuxシステムでファイルシステムにアクセス可能。

さらに、コンテナの開発環境を構築可能なDocker Desktopでも必須です。

## コマンド一覧

### WSLの状態確認

- WSLがない環境

    ```powershell:WSLがない環境
    ```

- WSLがある環境

    ```powershell:WSLがある環境
    ```

PowerShellを使用してWSL2にアクセスする方法は以下の手順になります：

1. **WSL機能の有効化**:
   PowerShellを開き、以下のコマンドを実行して、WSL機能を有効にします。
   ```powershell
   Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
   ```

2. **仮想マシンプラットフォームの有効化**:
   WSL2を使用するためには、仮想マシンプラットフォームも有効にする必要があります。
   ```powershell
   Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform
   ```

3. **WSL2カーネルのインストール**:
   Microsoftの公式サイトからWSL2 Linuxカーネル更新プログラムパッケージをダウンロードしてインストールします。

4. **WSLバージョンの設定**:
   既存のWSLインスタンスをWSL2にアップグレードするには、以下のコマンドを使用します。
   ```powershell
   wsl --set-version <DistributionName> 2
   ```
   ここで`<DistributionName>`は、アップグレードしたいLinuxディストリビューションの名前です。

5. **新しいWSLディストリビューションのインストール**:
   Microsoft Storeから新しいLinuxディストリビューションをインストールすることもできます。

6. **WSL2にアクセス**:
   PowerShellまたはコマンドプロンプトから、以下のコマンドを使用してWSL2にアクセスします。
   ```powershell
   wsl
   ```
   または特定のディストリビューションを指定して起動することもできます。
   ```powershell
   wsl -d <DistributionName>
   ```

これらの手順は、WSL2を有効にし、使用するための基本的なガイドラインです。詳細な手順や追加の設定については、Microsoftの公式ドキュメントや、WSL2に関する他のリソースを参照してください¹²。もし何か他に質問があれば、お気軽にどうぞ！

ソース: Bing との会話 2024/5/9
(1) WSL2 を PowerShellで有効にする #Windows - Qiita. https://qiita.com/mizutoki79/items/c8fcb26a03957805b9b3.
(2) Windows 11 で WSL2 をセットアップしてみた | DevelopersIO. https://dev.classmethod.jp/articles/how-to-setup-wsl2-for-windows11/.
(3) wsl2 で立てたサーバーにローカルネットワーク内の他の端末から .... https://qiita.com/tomoken_nikki/items/82234030e712c44c2e40.
(4) wsl2でよく使う、windowsとlinux間のファイル移動やコマンド実行 .... https://qiita.com/Uchitaso/items/6e0a7859e87bb8bdb527.
(5) undefined. https://aka.ms/wsl2.

## 参考情報

https://learn.microsoft.com/ja-jp/windows/wsl/install