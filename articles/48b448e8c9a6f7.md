---
title: "[PowerShell]“$LastExitCode”と“$?”の戻り値の動きを比較（cmdとも対比）"
emoji: "💭"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["powershell"]
published: false
---
## 概要
## この記事のターゲット
## 内容
```
Microsoft Windows [Version 10.0.19045.3324]
(c) Microsoft Corporation. All rights reserved.

C:\WINDOWS\system32>cd D:\Downloads\lastexitcode_test\bat

C:\WINDOWS\system32>
C:\WINDOWS\system32>cd /d D:\Downloads\lastexitcode_test\bat

D:\Downloads\lastexitcode_test\bat>
D:\Downloads\lastexitcode_test\bat>di
'di' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。

D:\Downloads\lastexitcode_test\bat>dir
 ドライブ D のボリューム ラベルは ボリューム です
 ボリューム シリアル番号は 1298-06B4 です

 D:\Downloads\lastexitcode_test\bat のディレクトリ

2023/08/21  09:12    <DIR>          .
2023/08/21  09:12    <DIR>          ..
2023/08/21  09:12                19 ng-pattern.bat
2023/08/21  09:13                12 ok-pattern.bat
               2 個のファイル                  31 バイト
               2 個のディレクトリ  56,886,099,968 バイトの空き領域

D:\Downloads\lastexitcode_test\bat>
D:\Downloads\lastexitcode_test\bat>ok-pattern.bat

D:\Downloads\lastexitcode_test\bat>ECHO OKAY!
OKAY!

D:\Downloads\lastexitcode_test\bat>echo %ERRORLEVEL%
0

D:\Downloads\lastexitcode_test\bat>
D:\Downloads\lastexitcode_test\bat>ng-pattern.bat

D:\Downloads\lastexitcode_test\bat>NOT-EXITS-COMMAND
'NOT-EXITS-COMMAND' は、内部コマンドまたは外部コマンド、
操作可能なプログラムまたはバッチ ファイルとして認識されていません。

D:\Downloads\lastexitcode_test\bat>
D:\Downloads\lastexitcode_test\bat>echo %ERRORLEVEL%
9009

D:\Downloads\lastexitcode_test\bat>
```