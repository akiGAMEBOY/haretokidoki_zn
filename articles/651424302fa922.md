---
title: "Webからダウンロードしたデータのハッシュ値を確認する方法"
emoji: "🤝"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["security", "powershell", "hash"]
published: false
---
## 概要
インターネットからPowerShell Coreをダウンロードする際にGitHubのリリース情報に、
SHA256のハッシュ値が記載されていました。

自身のパソコンにダウンロード後、改ざんされていない事を確認してみたので、
手順を共有します。

## この記事のターゲット
- Windowsユーザーの方
- 標準ツールのみでハッシュ値をチェックしたい方
    - Windows標準コマンドであるCretUtilコマンドを使用
    - PowerShell CLIでハッシュ値の比較（照合）

## 環境
## ハッシュ値の確認手順
1. GitHubのリリース情報よりダウンロードするファイルのハッシュ値を確認。
	[GitHubのページ](https://github.com/PowerShell/PowerShell/releases)にて「PowerShell-7.3.6-win-x64.zip」のハッシュ値を確認。
	```:GitHubページの抜粋（ハッシュ値の記載場所）
	・PowerShell-7.3.6-win-x64.zip
		・FCBD1699BEAED9E42D8D335C60F17C746055C4F05D4D658D2F54B88F99BD01BA
	```
	- 参考情報
		https://learn.microsoft.com/ja-jp/windows-server/administration/windows-commands/certutil

2. ダウンロードしたファイルのハッシュ値を取得。
	```powershell:PowerShell CLIでハッシュ値を確認
	PS C:\WINDOWS\system32> $creutil_result = (CertUtil -hashfile "D:\Downloads\PowerShell-7.3.6-win-x64\PowerShell-7.3.6-win-x64.zip" SHA256)
	PS C:\WINDOWS\system32>
	PS C:\WINDOWS\system32> $creutil_result[1].ToUpper()
	FCBD1699BEAED9E42D8D335C60F17C746055C4F05D4D658D2F54B88F99BD01BA
	PS C:\WINDOWS\system32>
	```
	- 参考情報
		https://learn.microsoft.com/ja-jp/windows-server/administration/windows-commands/certutil

3. ハッシュ値の比較（照合）
	```powershell:PowerShell CLIでハッシュ値を比較（照合）
	PS C:\WINDOWS\system32> "FCBD1699BEAED9E42D8D335C60F17C746055C4F05D4D658D2F54B88F99BD01BA" -eq `
	>> "FCBD1699BEAED9E42D8D335C60F17C746055C4F05D4D658D2F54B88F99BD01BA"
	True
	PS C:\WINDOWS\system32>
	```

## まとめ
- ハッシュ値の確認は、Wiindow標準「CretUtilコマンド」で実現
- ハッシュ値の比較（照合）は「-eq」で実現

今までハッシュ値を意識せずにダウンロード＆ファイルを実行していましたが、
今後は、この方法で、どの環境でも比較的らくに確認する事ができそうです。

## 関連記事
https://haretokidoki-blog.com/pasocon_powershell-startup/
https://zenn.dev/haretokidoki/articles/7e6924ff0cc960
