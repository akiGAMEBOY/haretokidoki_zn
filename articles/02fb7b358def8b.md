---
title: "[Windows]ディスクの管理で消せない回復パーティションの削除方法 - DISKPARTコマンド"
emoji: "💿"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["windows"]
published: false
---
## 概要
OSがWindows 10 Proの環境で2.5インチHDDを増設しました。
増設に使用したハードディスク（HDD）が以前ノートパソコンで使用していたHDDとなり、
回復パーティションが残っていました。

通常、データドライブ（Dドライブなど）のボリューム（パーティション）を削除する場合、
`コンピューターの管理 -> 記憶域 -> ディスクの管理` よりパーティションの削除が可能ですが、
回復パーティションはパソコンを復元する際に使用する領域である為、簡単に消せないようになっていました。

ディスクの管理 ではなく **DISKPARTコマンドを使用し削除**できたので、
その手順を紹介します。

## この記事のターゲット
- Windows ユーザーの方
- ディスクの管理で削除できない領域（回復パーティションなど）を削除したい方
## 発生した問題
前述している通り、以前ノートパソコンで利用していた2.5インチのHDDを転用し、
HDDの増設に使用した結果、“回復パーティション”という領域を消していませんでした。

通常、ボリューム（パーティション）を消す際に使用するWindows標準ツールは、
`コンピューターの管理 -> 記憶域 -> ディスクの管理` となりますが、パーティションの削除ができませんでした。
::::details 便利情報：キーボード操作だけで [コンピューターの管理] を開く方法
“ファイル名を指定して実行”でコンピューターの管理をキーワードだけで起動可能。
1. ショートカットキー「`Winキー ＋ R`」
    `ファイル名を指定して実行` が起動
1. ファイル名を指定して実行で「`compmgmt.msc`」と入力
1. Enterキー
1. コンピューターの管理が起動
::::

![](https://storage.googleapis.com/zenn-user-upload/19c84154f034-20230512.png =600x)
*画像：対象の回復パーティションを右クリックしても“ヘルプ”のみ表示*
### 環境
Windows 10 Pro環境
```powershell:Get-WmiObjectコマンド
PS C:\Windows> Get-WmiObject Win32_OperatingSystem


SystemDirectory : C:\WINDOWS\system32
Organization    :
BuildNumber     : 19045
RegisteredUser  : XXXXX                     # マスク
SerialNumber    : 00000-00000-00000-AAAAA   # マスク
Version         : 10.0.19045
```
- 参考記事：PowerShellでWindowsバージョンを確認する方法
    https://macruby.info/powershell/powershell-os-version.html
## 解決方法
Windows標準コマンド、**DISKPARTコマンド** により回復パーティションを削除。
### 詳しい作業手順
:::message
**間違えたパーティションを消した場合、最悪OSが起動しなくなる**

DISKPARTコマンドは強い権限を持ったコマンドである為、くれぐれも間違えて消すことがないよう、
十分に注意してください。

DISKPARTコマンドは、ユーザーフレンドリーなコマンドではない（わかりにくい表示）為、
“ディスクの選択”や“パーティションを選択”を実行する際、
**DISKPARTコマンドの結果とディスクの管理を見比べながらコマンドを進めた方が安心**です。
:::
1. PowerShellのコマンドレット、もしくはコマンドプロンプトを“管理者として実行”
    - PowerShellのコマンドレットを起動する方法
        1. ファイル名を指定して実行で「powershell」
        1. `Ctrl + Shift + Enter` で管理者として実行
        1. ユーザーアカウント制御で「はい」を選択
    - コマンドプロンプトを起動する方法
        1. ファイル名を指定して実行で「cmd」
        1. `Ctrl + Shift + Enter` で管理者として実行
        1. ユーザーアカウント制御で「はい」を選択
    - 直接DISKPARTコマンドを起動する方法
        1. ファイル名を指定して実行で「diskpart」
        1. `Enter` で実行
        1. ユーザーアカウント制御で「はい」を選択
1. DISKPARTを起動
    PowerShell経由でDISKPARTコマンドを実行する場合で説明。
    ```powershell:管理者として実行
    PS C:\WINDOWS\system32> diskpart

    Microsoft DiskPart バージョン 10.0.19041.964

    Copyright (C) Microsoft Corporation.
    コンピューター: XXXX

    DISKPART>
    ```
1. ディスクの一覧を表示
    ```powershell:管理者として実行
    DISKPART> list disk

    ディスク      状態           サイズ   空き   ダイナ GPT
    ###                                          ミック
    ------------  -------------  -------  -------  ---  ---
    ディスク 0    オンライン           465 GB   464 GB
    ディスク 1    オンライン           238 GB    12 MB        *

    DISKPART>
    ```
1. 削除対象のパーティションがあるディスクを選択
    ```powershell:管理者として実行
    DISKPART> select disk 0

    ディスク 0 が選択されました。

    DISKPART>
    ```
1. 対象のディスクが選択された事（＊マーク）を確認
    ```powershell:管理者として実行
    DISKPART> list disk

    ディスク      状態           サイズ   空き   ダイナ GPT
    ###                                          ミック
    ------------  -------------  -------  -------  ---  ---
    * ディスク 0    オンライン           465 GB   464 GB
    ディスク 1    オンライン           238 GB    12 MB        *

    DISKPART>
    ```
1. パーティションの一覧を表示
    ```powershell:管理者として実行
    DISKPART> list partition

    Partition ###  Type                Size     Offset
    -------------  ------------------  -------  -------
    Partition 3    回復                 788 MB   250 GB

    DISKPART>
    ```
1. 削除対象のパーティションを選択
    ```powershell:管理者として実行
    DISKPART> select partition 3

    パーティション 3 が選択されました。

    DISKPART>
    ```
1. 対象のパーティションが選択された事（＊マーク）を確認
    ```powershell:管理者として実行
    DISKPART> list partition

    Partition ###  Type                Size     Offset
    -------------  ------------------  -------  -------
    * Partition 3    回復                 788 MB   250 GB

    DISKPART>
    ```
1. パーティションの削除
:::message alert
**間違えたパーティションを消した場合、最悪OSが起動しなくなる（最終確認）**

強制的にパーティションを削除します。
間違えたパーティションを削除してしまうと、最悪 **OSが起動不可** となります。

間違えて削除しないようDISKPARTのコマンド結果とディスクの管理を比較してから
削除を実行してください。
:::
```powershell:管理者として実行
DISKPART> delete partition override

DiskPart は選択されたパーティションを正常に削除しました。

DISKPART>
```
1. DISKPARTを終了
```powershell:管理者として実行
DISKPART> exit

DiskPart を終了しています...
PS C:\WINDOWS\system32>
```
1. 削除できた事を確認
    ![](https://storage.googleapis.com/zenn-user-upload/19c84154f034-20230512.png =600x)
    *画像：ディスクの管理にて問題なく対象の“回復パーティション”が削除できたことを確認*

::::details 参考情報：区切りがない一連のコマンド
```powershell:管理者として実行
PS C:\WINDOWS\system32> diskpart

Microsoft DiskPart バージョン 10.0.19041.964

Copyright (C) Microsoft Corporation.
コンピューター: XXXX

DISKPART>

DISKPART> list disk

  ディスク      状態           サイズ   空き   ダイナ GPT
  ###                                          ミック
  ------------  -------------  -------  -------  ---  ---
  ディスク 0    オンライン           465 GB   464 GB
  ディスク 1    オンライン           238 GB    12 MB        *

DISKPART>

DISKPART> select disk 0

ディスク 0 が選択されました。

DISKPART>

DISKPART> list disk

  ディスク      状態           サイズ   空き   ダイナ GPT
  ###                                          ミック
  ------------  -------------  -------  -------  ---  ---
* ディスク 0    オンライン           465 GB   464 GB
  ディスク 1    オンライン           238 GB    12 MB        *

DISKPART>

DISKPART> list partition

  Partition ###  Type                Size     Offset
  -------------  ------------------  -------  -------
  Partition 3    回復                 788 MB   250 GB

DISKPART>

DISKPART> select partition 3

パーティション 3 が選択されました。

DISKPART>

DISKPART> list partition

  Partition ###  Type                Size     Offset
  -------------  ------------------  -------  -------
* Partition 3    回復                 788 MB   250 GB

DISKPART>
DISKPART> delete partition override

DiskPart は選択されたパーティションを正常に削除しました。

DISKPART>
DISKPART> exit

DiskPart を終了しています...
PS C:\WINDOWS\system32>
```
::::

## 関連記事
https://pc-karuma.net/windows-10-delete-recovery-partition-diskpart/
## 雑学：Windowsのシステムドライブは、なぜ「C」なのか
なぜ、Windowsのシステムドライブが規定値で「Cドライブ」となっているのか
疑問に感じたことはありますか？

疑問に感じている方の多くは、若い方だと思います。

Cドライブから始まっている理由は、
古い昔のパソコンでは「フロッピーディスクのドライブ」2つをAドライブ

  ドライブレターの説明

    関連ワード
      AドライブとBドライブはどこ
        システムはデフォルトでCドライブとなる
      AドライブとBドライブはフロッピー
        実は設定を変更すれば、AドライブとBドライブに割り当て可能
      CドライブとDドライブなどの使い分け

    ABはフロッピーディスク
    CはOSインストールドライブ（HDD・SSD）
    Dはデータ格納用のドライブ（HDD・SSD）
    EFはCDやDVD、Blu-rayドライブ、SDカードリーダー
    G以降は多目的ドライブ（HDD・SSD）

https://nlab.itmedia.co.jp/nl/articles/1611/22/news058.html
## まとめ
- Windows標準コマンド、DISKPARTコマンドで回復パーティションの削除可能
- DISKPARTはユーザーフレンドリーなコマンドではない
- DISKPARTは強い権限を持ったコマンドである為、間違えて削除しないよう十分、気を付ける
